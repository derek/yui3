YUI.add("charts-base",function(b){var g=b.config.doc,q=b.Lang,l=q.isString,k,p,u,a,c=b.ClassNameManager.getClassName,n=c("seriesmarker"),r,A,v,y,t;r=function(B){r.superclass.constructor.apply(this,arguments);};r.NAME="shapeGroup";b.extend(r,b.Path,{_draw:function(){var I=this.get("xvalues"),F=this.get("yvalues"),M,L,C,E,T=0,U,Q=[],G=this.get("dimensions"),R=G.width,N=G.height,D=G.radius,H=G.yRadius,O=this.get("id"),B=this.node.className,S=q.isArray(R),P=q.isArray(N),J=q.isArray(D),K=q.isArray(H);if(I&&F&&I.length>0){this.clear();U=I.length;for(;T<U;++T){M=I[T];L=F[T];C=J?D[T]:D;E=K?H[T]:H;if(!isNaN(M)&&!isNaN(L)&&!isNaN(C)){this.drawShape({x:M,y:L,width:S?R[T]:R,height:P?N[T]:N,radius:C,yRadius:E});this.closePath();Q[T]={id:O+"_"+T,className:B,coords:(M-this._left)+", "+(L-this._top)+", "+D,shape:"circle"};}}this._closePath();}},_getRadiusCollection:function(E){var C=0,B=E.length,D=[];for(;C<B;++C){D[C]=E[C]*0.5;}return D;}});r.ATTRS=b.merge(b.Path.ATTRS,{dimensions:{getter:function(){var F=this._dimensions,D,C,E,B;if(F.hasOwnProperty("radius")){return F;}else{E=F.width;B=F.height;D=q.isArray(E)?this._getRadiusCollection(E):(E*0.5);C=q.isArray(B)?this._getRadiusCollection(B):(B*0.5);return{width:E,height:B,radius:D,yRadius:C};}},setter:function(B){this._dimensions=B;return B;}},xvalues:{getter:function(){return this._xvalues;},setter:function(B){this._xvalues=B;}},yvalues:{getter:function(){return this._yvalues;},setter:function(B){this._yvalues=B;}}});b.ShapeGroup=r;A=function(B){A.superclass.constructor.apply(this,arguments);};A.NAME="circleGroup";b.extend(A,b.ShapeGroup,{drawShape:function(B){this.drawCircle(B.x,B.y,B.radius);}});A.ATTRS=b.merge(b.ShapeGroup.ATTRS,{dimensions:{getter:function(){var F=this._dimensions,D,C,E,B;if(F.hasOwnProperty("radius")){return F;}else{E=F.width;B=F.height;D=q.isArray(E)?this._getRadiusCollection(E):(E*0.5);C=D;return{width:E,height:B,radius:D,yRadius:C};}}}});A.ATTRS=b.ShapeGroup.ATTRS;b.CircleGroup=A;v=function(B){v.superclass.constructor.apply(this,arguments);};v.NAME="rectGroup";b.extend(v,b.ShapeGroup,{drawShape:function(B){this.drawRect(B.x,B.y,B.width,B.height);}});v.ATTRS=b.ShapeGroup.ATTRS;b.RectGroup=v;t=function(B){t.superclass.constructor.apply(this,arguments);};t.NAME="diamondGroup";b.extend(t,b.ShapeGroup,{drawShape:function(B){this.drawDiamond(B.x,B.y,B.width,B.height);}});t.ATTRS=b.ShapeGroup.ATTRS;b.DiamondGroup=t;y=function(B){y.superclass.constructor.apply(this,arguments);};y.NAME="diamondGroup";b.extend(y,b.ShapeGroup,{drawShape:function(B){this.drawEllipse(B.x,B.y,B.width,B.height);}});y.ATTRS=b.ShapeGroup.ATTRS;b.EllipseGroup=y;function s(){}s.ATTRS={styles:{getter:function(){this._styles=this._styles||this._getDefaultStyles();return this._styles;},setter:function(B){this._styles=this._setStyles(B);}},graphic:{}};s.NAME="renderer";s.prototype={_styles:null,_setStyles:function(C){var B=this.get("styles");return this._mergeStyles(C,B);},_mergeStyles:function(C,B){if(!B){B={};}var D=b.merge(B,{});b.Object.each(C,function(G,F,E){if(B.hasOwnProperty(F)&&q.isObject(G)&&!q.isFunction(G)&&!q.isArray(G)){D[F]=this._mergeStyles(G,B[F]);}else{D[F]=G;}},this);return D;},_getDefaultStyles:function(){return{padding:{top:0,right:0,bottom:0,left:0}};}};b.augment(s,b.Attribute);b.Renderer=s;k=function(){};k.prototype={_getDefaultMargins:function(){return{top:0,left:0,right:4,bottom:0};},setTickOffsets:function(){var D=this,F=D.get("styles").majorTicks,C=F.length,B=C*0.5,E=F.display;D.set("topTickOffset",0);D.set("bottomTickOffset",0);switch(E){case"inside":D.set("rightTickOffset",C);D.set("leftTickOffset",0);break;case"outside":D.set("rightTickOffset",0);D.set("leftTickOffset",C);break;case"cross":D.set("rightTickOffset",B);D.set("leftTickOffset",B);break;default:D.set("rightTickOffset",0);D.set("leftTickOffset",0);break;}},drawTick:function(I,J,E){var H=this,B=H.get("styles"),G=B.padding,F=E.length,C={x:G.left,y:J.y},D={x:F+G.left,y:J.y};H.drawLine(I,C,D);},getLineStart:function(){var B=this.get("styles"),F=B.padding,G=B.majorTicks,C=G.length,E=G.display,D={x:F.left,y:0};if(E==="outside"){D.x+=C;}else{if(E==="cross"){D.x+=C/2;}}return D;},getLabelPoint:function(B){return{x:B.x-this.get("leftTickOffset"),y:B.y};},updateMaxLabelSize:function(F,D){var J=this,G=this._labelRotationProps,B=G.rot,E=G.absRot,I=G.sinRadians,C=G.cosRadians,H;if(B===0){H=F;}else{if(E===90){H=D;}else{H=(C*F)+(I*D);}}J._maxLabelSize=Math.max(J._maxLabelSize,H);},getExplicitlySized:function(E){if(this._explicitWidth){var D=this,B=D._explicitWidth,C=D._totalTitleSize,G=D.get("leftTickOffset"),F=E.label.margin.right;D._maxLabelSize=B-(G+F+C);return true;}return false;},positionTitle:function(I){var K=this,B=K._titleBounds,C=K.get("styles").title.margin,F=K._titleRotationProps,J=B.right-B.left,E=I.offsetWidth,D=I.offsetHeight,H=(E*-0.5)+(J*0.5),G=(K.get("height")*0.5)-(D*0.5);F.labelWidth=E;F.labelHeight=D;if(C&&C.left){H+=C.left;}F.x=H;F.y=G;F.transformOrigin=[0.5,0.5];K._rotate(I,F);},positionLabel:function(L,P,N,G){var O=this,M=O.get("leftTickOffset"),I=this._totalTitleSize,D=P.x+I-M,H=P.y,K=this._labelRotationProps,C=K.rot,F=K.absRot,B=O._maxLabelSize,J=this._labelWidths[G],E=this._labelHeights[G];if(C===0){D-=J;H-=E*0.5;}else{if(C===90){D-=J*0.5;}else{if(C===-90){D-=J*0.5;H-=E;}else{D-=J+(E*F/360);H-=E*0.5;}}}K.labelWidth=J;K.labelHeight=E;K.x=Math.round(B+D);K.y=Math.round(H);this._rotate(L,K);},_setRotationCoords:function(F){var C=F.rot,D=F.absRot,G,E,B=F.labelWidth,H=F.labelHeight;if(C===0){G=B;E=H*0.5;}else{if(C===90){E=0;G=B*0.5;}else{if(C===-90){G=B*0.5;E=H;}else{G=B+(H*D/360);E=H*0.5;}}}F.x-=G;F.y-=E;},_getTransformOrigin:function(B){var C;if(B===0){C=[0,0];}else{if(B===90){C=[0.5,0];}else{if(B===-90){C=[0.5,1];}else{C=[1,0.5];}}}return C;},offsetNodeForTick:function(B){},setCalculatedSize:function(){var G=this,I=this.get("graphic"),F=G.get("styles"),E=F.label,H=G.get("leftTickOffset"),C=G._maxLabelSize,D=this._totalTitleSize,B=Math.round(D+H+C+E.margin.right);if(this._explicitWidth){B=this._explicitWidth;
}this.set("calculatedWidth",B);I.set("x",B-H);}};b.LeftAxisLayout=k;p=function(){};p.prototype={_getDefaultMargins:function(){return{top:0,left:4,right:0,bottom:0};},setTickOffsets:function(){var D=this,F=D.get("styles").majorTicks,C=F.length,B=C*0.5,E=F.display;D.set("topTickOffset",0);D.set("bottomTickOffset",0);switch(E){case"inside":D.set("leftTickOffset",C);D.set("rightTickOffset",0);break;case"outside":D.set("leftTickOffset",0);D.set("rightTickOffset",C);break;case"cross":D.set("rightTickOffset",B);D.set("leftTickOffset",B);break;default:D.set("leftTickOffset",0);D.set("rightTickOffset",0);break;}},drawTick:function(I,J,E){var H=this,B=H.get("styles"),G=B.padding,F=E.length,C={x:G.left,y:J.y},D={x:G.left+F,y:J.y};H.drawLine(I,C,D);},getLineStart:function(){var D=this,B=D.get("styles"),G=B.padding,H=B.majorTicks,C=H.length,F=H.display,E={x:G.left,y:G.top};if(F==="inside"){E.x+=C;}else{if(F==="cross"){E.x+=C/2;}}return E;},getLabelPoint:function(B){return{x:B.x+this.get("rightTickOffset"),y:B.y};},updateMaxLabelSize:function(F,D){var J=this,G=this._labelRotationProps,B=G.rot,E=G.absRot,I=G.sinRadians,C=G.cosRadians,H;if(B===0){H=F;}else{if(E===90){H=D;}else{H=(C*F)+(I*D);}}J._maxLabelSize=Math.max(J._maxLabelSize,H);},getExplicitlySized:function(E){if(this._explicitWidth){var D=this,B=D._explicitWidth,C=this._totalTitleSize,G=D.get("rightTickOffset"),F=E.label.margin.right;D._maxLabelSize=B-(G+F+C);return true;}return false;},positionTitle:function(I){var K=this,B=K._titleBounds,C=K.get("styles").title.margin,F=K._titleRotationProps,E=I.offsetWidth,D=I.offsetHeight,J=B.right-B.left,H=this.get("width")-(E*0.5)-(J*0.5),G=(K.get("height")*0.5)-(D*0.5);F.labelWidth=E;F.labelHeight=D;if(C&&C.right){H-=C.left;}F.x=H;F.y=G;F.transformOrigin=[0.5,0.5];K._rotate(I,F);},positionLabel:function(L,P,N,G){var O=this,M=O.get("rightTickOffset"),K=N.label,D=0,C=P.x,H=P.y,J=this._labelRotationProps,B=J.rot,F=J.absRot,I=this._labelWidths[G],E=this._labelHeights[G];if(K.margin&&K.margin.left){D=K.margin.left;}if(B===0){H-=E*0.5;}else{if(B===90){C-=I*0.5;H-=E;}else{if(B===-90){C-=I*0.5;}else{H-=E*0.5;C+=E/2*F/90;}}}C+=D;C+=M;J.labelWidth=I;J.labelHeight=E;J.x=Math.round(C);J.y=Math.round(H);this._rotate(L,J);},_setRotationCoords:function(F){var C=F.rot,D=F.absRot,G=0,E=0,B=F.labelWidth,H=F.labelHeight;if(C===0){E=H*0.5;}else{if(C===90){G=B*0.5;E=H;}else{if(C===-90){G=B*0.5;}else{E=H*0.5;G=H/2*D/90;}}}F.x-=G;F.y-=E;},_getTransformOrigin:function(B){var C;if(B===0){C=[0,0];}else{if(B===90){C=[0.5,1];}else{if(B===-90){C=[0.5,0];}else{C=[0,0.5];}}}return C;},offsetNodeForTick:function(B){var C=this,E=C.get("leftTickOffset"),D=0-E;B.setStyle("left",D);},setCalculatedSize:function(){var F=this,E=F.get("styles"),C=E.label,D=this._totalTitleSize,B=Math.round(F.get("rightTickOffset")+F._maxLabelSize+D+C.margin.left);if(this._explicitWidth){B=this._explicitWidth;}F.set("calculatedWidth",B);F.get("contentBox").setStyle("width",B);}};b.RightAxisLayout=p;u=function(){};u.prototype={_getDefaultMargins:function(){return{top:4,left:0,right:0,bottom:0};},setTickOffsets:function(){var D=this,F=D.get("styles").majorTicks,C=F.length,B=C*0.5,E=F.display;D.set("leftTickOffset",0);D.set("rightTickOffset",0);switch(E){case"inside":D.set("topTickOffset",C);D.set("bottomTickOffset",0);break;case"outside":D.set("topTickOffset",0);D.set("bottomTickOffset",C);break;case"cross":D.set("topTickOffset",B);D.set("bottomTickOffset",B);break;default:D.set("topTickOffset",0);D.set("bottomTickOffset",0);break;}},getLineStart:function(){var B=this.get("styles"),F=B.padding,G=B.majorTicks,C=G.length,E=G.display,D={x:0,y:F.top};if(E==="inside"){D.y+=C;}else{if(E==="cross"){D.y+=C/2;}}return D;},drawTick:function(I,J,E){var H=this,B=H.get("styles"),G=B.padding,F=E.length,C={x:J.x,y:G.top},D={x:J.x,y:F+G.top};H.drawLine(I,C,D);},getLabelPoint:function(B){return{x:B.x,y:B.y+this.get("bottomTickOffset")};},updateMaxLabelSize:function(F,D){var J=this,G=this._labelRotationProps,B=G.rot,E=G.absRot,I=G.sinRadians,C=G.cosRadians,H;if(B===0){H=D;}else{if(E===90){H=F;}else{H=(I*F)+(C*D);}}J._maxLabelSize=Math.max(J._maxLabelSize,H);},getExplicitlySized:function(F){if(this._explicitHeight){var E=this,C=E._explicitHeight,B=E._totalTitleSize,D=E.get("bottomTickOffset"),G=F.label.margin.right;E._maxLabelSize=C-(D+G+B);return true;}return false;},positionTitle:function(J){var K=this,B=K._titleBounds,C=K.get("styles").title.margin,G=K._titleRotationProps,E=B.bottom-B.top,F=J.offsetWidth,D=J.offsetHeight,I=(K.get("width")*0.5)-(F*0.5),H=K.get("height")-D/2-E/2;G.labelWidth=F;G.labelHeight=D;if(C&&C.bottom){H-=C.bottom;}G.x=I;G.y=H;G.transformOrigin=[0.5,0.5];K._rotate(J,G);},positionLabel:function(L,P,N,G){var O=this,M=O.get("bottomTickOffset"),K=N.label,D=0,J=O._labelRotationProps,C=J.rot,F=J.absRot,B=Math.round(P.x),H=Math.round(P.y),I=O._labelWidths[G],E=O._labelHeights[G];if(K.margin&&K.margin.top){D=K.margin.top;}if(C>0){H-=E/2*C/90;}else{if(C<0){B-=I;H-=E/2*F/90;}else{B-=I*0.5;}}H+=D;H+=M;J.labelWidth=I;J.labelHeight=E;J.x=B;J.y=H;O._rotate(L,J);},_setRotationCoords:function(F){var C=F.rot,D=F.absRot,B=F.labelWidth,H=F.labelHeight,G,E;if(C>0){G=0;E=H/2*C/90;}else{if(C<0){G=B;E=H/2*D/90;}else{G=B*0.5;E=0;}}F.x-=G;F.y-=E;},_getTransformOrigin:function(B){var C;if(B>0){C=[0,0.5];}else{if(B<0){C=[1,0.5];}else{C=[0,0];}}return C;},offsetNodeForTick:function(B){var C=this;C.get("contentBox").setStyle("top",0-C.get("topTickOffset"));},setCalculatedSize:function(){var F=this,E=F.get("styles"),C=E.label,D=F._totalTitleSize,B=Math.round(F.get("bottomTickOffset")+F._maxLabelSize+C.margin.top+D);if(F._explicitHeight){B=F._explicitHeight;}F.set("calculatedHeight",B);}};b.BottomAxisLayout=u;a=function(){};a.prototype={_getDefaultMargins:function(){return{top:0,left:0,right:0,bottom:4};},setTickOffsets:function(){var D=this,F=D.get("styles").majorTicks,C=F.length,B=C*0.5,E=F.display;D.set("leftTickOffset",0);D.set("rightTickOffset",0);switch(E){case"inside":D.set("bottomTickOffset",C);
D.set("topTickOffset",0);break;case"outside":D.set("bottomTickOffset",0);D.set("topTickOffset",C);break;case"cross":D.set("topTickOffset",B);D.set("bottomTickOffset",B);break;default:D.set("topTickOffset",0);D.set("bottomTickOffset",0);break;}},getLineStart:function(){var D=this,B=D.get("styles"),G=B.padding,H=B.majorTicks,C=H.length,F=H.display,E={x:0,y:G.top};if(F==="outside"){E.y+=C;}else{if(F==="cross"){E.y+=C/2;}}return E;},drawTick:function(I,J,E){var H=this,B=H.get("styles"),G=B.padding,F=E.length,C={x:J.x,y:G.top},D={x:J.x,y:F+G.top};H.drawLine(I,C,D);},getLabelPoint:function(B){return{x:B.x,y:B.y-this.get("topTickOffset")};},updateMaxLabelSize:function(F,D){var J=this,G=this._labelRotationProps,B=G.rot,E=G.absRot,I=G.sinRadians,C=G.cosRadians,H;if(B===0){H=D;}else{if(E===90){H=F;}else{H=(I*F)+(C*D);}}J._maxLabelSize=Math.max(J._maxLabelSize,H);},getExplicitlySized:function(E){if(this._explicitHeight){var D=this,C=D._explicitHeight,B=D._totalTitleSize,G=D.get("topTickOffset"),F=E.label.margin.right;D._maxLabelSize=C-(G+F+B);return true;}return false;},positionTitle:function(J){var K=this,B=K._titleBounds,C=K.get("styles").title.margin,G=K._titleRotationProps,F=J.offsetWidth,D=J.offsetHeight,E=B.bottom-B.top,I=(K.get("width")*0.5)-(F*0.5),H=E/2-D/2;G.labelWidth=F;G.labelHeight=D;if(C&&C.top){H+=C.top;}G.x=I;G.y=H;G.transformOrigin=[0.5,0.5];K._rotate(J,G);},positionLabel:function(L,O,M,G){var N=this,I=this._totalTitleSize,B=N._maxLabelSize,D=O.x,H=O.y+I+B,K=this._labelRotationProps,C=K.rot,F=K.absRot,J=this._labelWidths[G],E=this._labelHeights[G];if(C===0){D-=J*0.5;H-=E;}else{if(C===90){D-=J;H-=(E*0.5);}else{if(C===-90){H-=(E*0.5);}else{if(C>0){D-=J;H-=E-(E*C/180);}else{H-=E-(E*F/180);}}}}K.x=Math.round(D);K.y=Math.round(H);K.labelWidth=J;K.labelHeight=E;this._rotate(L,K);},_setRotationCoords:function(F){var C=F.rot,D=F.absRot,B=F.labelWidth,H=F.labelHeight,G,E;if(C===0){G=B*0.5;E=H;}else{if(C===90){G=B;E=(H*0.5);}else{if(C===-90){E=(H*0.5);}else{if(C>0){G=B;E=H-(H*C/180);}else{E=H-(H*D/180);}}}}F.x-=G;F.y-=E;},_getTransformOrigin:function(B){var C;if(B===0){C=[0,0];}else{if(B===90){C=[1,0.5];}else{if(B===-90){C=[0,0.5];}else{if(B>0){C=[1,0.5];}else{C=[0,0.5];}}}}return C;},offsetNodeForTick:function(B){},setCalculatedSize:function(){var F=this,I=F.get("graphic"),E=F.get("styles"),D=E.label.margin,H=D.bottom+F._maxLabelSize,C=F._totalTitleSize,G=this.get("topTickOffset"),B=Math.round(G+H+C);if(this._explicitHeight){B=this._explicitWidth;}F.set("calculatedHeight",B);I.set("y",B-G);}};b.TopAxisLayout=a;b.Axis=b.Base.create("axis",b.Widget,[b.Renderer],{_calculatedWidth:0,_calculatedHeight:0,_dataChangeHandler:function(B){if(this.get("rendered")){this._drawAxis();}},_positionChangeHandler:function(B){this._updateGraphic(B.newVal);this._updateHandler();},_updateGraphic:function(B){var C=this.get("graphic");if(B=="none"){if(C){C.destroy();}}else{if(!C){this._setCanvas();}}},_updateHandler:function(B){if(this.get("rendered")){this._drawAxis();}},renderUI:function(){this._updateGraphic(this.get("position"));},syncUI:function(){var F=this._layout,E,D,B,G,C;if(F){E=F._getDefaultMargins();D=this.get("styles");B=D.label.margin;G=D.title.margin;for(C in E){if(E.hasOwnProperty(C)){B[C]=B[C]===undefined?E[C]:B[C];G[C]=G[C]===undefined?E[C]:G[C];}}}this._drawAxis();},_setCanvas:function(){var B=this.get("contentBox"),G=this.get("boundingBox"),F=this.get("position"),D=this._parentNode,C=this.get("width"),E=this.get("height");G.setStyle("position","absolute");G.setStyle("zIndex",2);C=C?C+"px":D.getStyle("width");E=E?E+"px":D.getStyle("height");if(F==="top"||F==="bottom"){B.setStyle("width",C);}else{B.setStyle("height",E);}B.setStyle("position","relative");B.setStyle("left","0px");B.setStyle("top","0px");this.set("graphic",new b.Graphic());this.get("graphic").render(B);},_getDefaultStyles:function(){var B={majorTicks:{display:"inside",length:4,color:"#dad8c9",weight:1,alpha:1},minorTicks:{display:"none",length:2,color:"#dad8c9",weight:1},line:{weight:1,color:"#dad8c9",alpha:1},majorUnit:{determinant:"count",count:11,distance:75},top:"0px",left:"0px",width:"100px",height:"100px",label:{color:"#808080",alpha:1,fontSize:"85%",rotation:0,margin:{top:undefined,right:undefined,bottom:undefined,left:undefined}},title:{color:"#808080",alpha:1,fontSize:"85%",rotation:undefined,margin:{top:undefined,right:undefined,bottom:undefined,left:undefined}},hideOverlappingLabelTicks:false};return b.merge(b.Renderer.prototype._getDefaultStyles(),B);},_handleSizeChange:function(E){var D=E.attrName,G=this.get("position"),C=G=="left"||G=="right",B=this.get("contentBox"),F=G=="bottom"||G=="top";B.setStyle("width",this.get("width"));B.setStyle("height",this.get("height"));if((F&&D=="width")||(C&&D=="height")){this._drawAxis();}},_layoutClasses:{top:a,bottom:u,left:k,right:p},drawLine:function(D,C,B){D.moveTo(C.x,C.y);D.lineTo(B.x,B.y);},_getTextRotationProps:function(F){if(F.rotation===undefined){switch(this.get("position")){case"left":F.rotation=-90;break;case"right":F.rotation=90;break;default:F.rotation=0;break;}}var C=Math.min(90,Math.max(-90,F.rotation)),E=Math.abs(C),D=Math.PI/180,G=parseFloat(parseFloat(Math.sin(E*D)).toFixed(8)),B=parseFloat(parseFloat(Math.cos(E*D)).toFixed(8));return{rot:C,absRot:E,radCon:D,sinRadians:G,cosRadians:B,textAlpha:F.alpha};},_drawAxis:function(){if(this._drawing){this._callLater=true;return;}this._drawing=true;this._callLater=false;if(this._layout){var J=this.get("styles"),L=J.line,H=J.label,X=J.majorTicks,B=X.display!="none",K,E=J.majorUnit,U,S,T=0,V=this._layout,R,Y,N,I,W,C,G=this.get("labelFunction"),D=this.get("labelFunctionScope"),F=this.get("labelFormat"),M=this.get("graphic"),O=this.get("path"),P,Q;this._labelWidths=[];this._labelHeights=[];M.set("autoDraw",false);O.clear();O.set("stroke",{weight:L.weight,color:L.color,opacity:L.alpha});this._labelRotationProps=this._getTextRotationProps(H);this._labelRotationProps.transformOrigin=V._getTransformOrigin(this._labelRotationProps.rot);
V.setTickOffsets.apply(this);R=this.getLength();N=V.getLineStart.apply(this);U=this.getTotalMajorUnits(E);S=this.getMajorUnitDistance(U,R,E);this.set("edgeOffset",this.getEdgeOffset(U,R)*0.5);if(U<1){this._clearLabelCache();}else{K=this.getFirstPoint(N);this.drawLine(O,N,this.getLineEnd(K));if(B){P=this.get("tickPath");P.clear();P.set("stroke",{weight:X.weight,color:X.color,opacity:X.alpha});V.drawTick.apply(this,[P,K,X]);}this._createLabelCache();this._tickPoints=[];this._maxLabelSize=0;this._totalTitleSize=0;this._titleSize=0;this._setTitle();Q=V.getExplicitlySized.apply(this,[J]);for(;T<U;++T){if(B){V.drawTick.apply(this,[P,K,X]);}Y=this.getPosition(K);I=this.getLabel(K,H);this._labels.push(I);this._tickPoints.push({x:K.x,y:K.y});this.get("appendLabelFunction")(I,G.apply(D,[this.getLabelByIndex(T,U),F]));W=Math.round(I.offsetWidth);C=Math.round(I.offsetHeight);if(!Q){this._layout.updateMaxLabelSize.apply(this,[W,C]);}this._labelWidths.push(W);this._labelHeights.push(C);K=this.getNextPoint(K,S);}this._clearLabelCache();if(this.get("overlapGraph")){V.offsetNodeForTick.apply(this,[this.get("contentBox")]);}V.setCalculatedSize.apply(this);if(this._titleTextField){this._layout.positionTitle.apply(this,[this._titleTextField]);}for(T=0;T<U;++T){V.positionLabel.apply(this,[this.get("labels")[T],this._tickPoints[T],J,T]);}}}this._drawing=false;if(this._callLater){this._drawAxis();}else{this._updatePathElement();this.fire("axisRendered");}},_setTotalTitleSize:function(J){var H=this._titleTextField,I=H.offsetWidth,F=H.offsetHeight,C=this._titleRotationProps.rot,B,K,D=J.margin,E=this.get("position"),G=new b.Matrix();G.rotate(C);B=G.getContentRect(I,F);if(E=="left"||E=="right"){K=B.right-B.left;if(D){K+=D.left+D.right;}}else{K=B.bottom-B.top;if(D){K+=D.top+D.bottom;}}this._titleBounds=B;this._totalTitleSize=K;},_updatePathElement:function(){var B=this._path,E=this._tickPath,C=false,D=this.get("graphic");if(B){C=true;B.end();}if(E){C=true;E.end();}if(C){D._redraw();}},_setTitle:function(){var D,F,E,G=this.get("title"),C=this._titleTextField,B;if(G!==null&&G!==undefined){E={rotation:"rotation",margin:"margin",alpha:"alpha"};F=this.get("styles").title;if(!C){C=g.createElement("span");C.style.display="block";C.style.whiteSpace="nowrap";C.setAttribute("class","axisTitle");this.get("contentBox").append(C);}else{if(!g.createElementNS){if(C.style.filter){C.style.filter=null;}}}C.style.position="absolute";for(D in F){if(F.hasOwnProperty(D)&&!E.hasOwnProperty(D)){C.style[D]=F[D];}}this.get("appendTitleFunction")(C,G);this._titleTextField=C;this._titleRotationProps=this._getTextRotationProps(F);this._setTotalTitleSize(F);}else{if(C){B=C.parentNode;if(B){B.removeChild(C);}this._titleTextField=null;this._totalTitleSize=0;}}},getLabel:function(G,E){var C,B,F=this._labelCache,D={rotation:"rotation",margin:"margin",alpha:"alpha"};if(F&&F.length>0){B=F.shift();}else{B=g.createElement("span");B.className=b.Lang.trim([B.className,"axisLabel"].join(" "));this.get("contentBox").append(B);}if(!g.createElementNS){if(B.style.filter){B.style.filter=null;}}B.style.display="block";B.style.whiteSpace="nowrap";B.style.position="absolute";for(C in E){if(E.hasOwnProperty(C)&&!D.hasOwnProperty(C)){B.style[C]=E[C];}}return B;},_createLabelCache:function(){if(this._labels){while(this._labels.length>0){this._labelCache.push(this._labels.shift());}}else{this._clearLabelCache();}this._labels=[];},_clearLabelCache:function(){if(this._labelCache){var B=this._labelCache.length,D=0,C;for(;D<B;++D){C=this._labelCache[D];this._removeChildren(C);b.Event.purgeElement(C,true);C.parentNode.removeChild(C);}}this._labelCache=[];},getLineEnd:function(D){var B=this.get("width"),C=this.get("height"),E=this.get("position");if(E==="top"||E==="bottom"){return{x:B,y:D.y};}else{return{x:D.x,y:C};}},getLength:function(){var C,E=this.get("styles"),F=E.padding,B=this.get("width"),D=this.get("height"),G=this.get("position");if(G==="top"||G==="bottom"){C=B-(F.left+F.right);}else{C=D-(F.top+F.bottom);}return C;},getFirstPoint:function(E){var B=this.get("styles"),F=this.get("position"),D=B.padding,C={x:E.x,y:E.y};if(F==="top"||F==="bottom"){C.x+=D.left+this.get("edgeOffset");}else{C.y+=this.get("height")-(D.top+this.get("edgeOffset"));}return C;},getNextPoint:function(B,C){var D=this.get("position");if(D==="top"||D==="bottom"){B.x=B.x+C;}else{B.y=B.y-C;}return B;},getLastPoint:function(){var C=this.get("styles"),D=C.padding,B=this.get("width"),E=this.get("position");if(E==="top"||E==="bottom"){return{x:B-D.right,y:D.top};}else{return{x:D.left,y:D.top};}},getPosition:function(B){var G,E=this.get("height"),D=this.get("styles"),F=D.padding,H=this.get("position"),C=this.get("dataType");if(H==="left"||H==="right"){if(C==="numeric"){G=(E-(F.top+F.bottom))-(B.y-F.top);}else{G=B.y-F.top;}}else{G=B.x-F.left;}return G;},_rotate:function(H,E){var B=E.rot,J=E.x,G=E.y,D,K,I=new b.Matrix(),C=E.transformOrigin||[0,0],F;if(g.createElementNS){I.translate(J,G);I.rotate(B);H.style.MozTransformOrigin=(C[0]*100)+"% "+(C[1]*100)+"%";H.style.MozTransform=I.toCSSText();H.style.webkitTransformOrigin=(C[0]*100)+"% "+(C[1]*100)+"%";H.style.webkitTransform=I.toCSSText();H.style.msTransformOrigin=(C[0]*100)+"% "+(C[1]*100)+"%";H.style.msTransform=I.toCSSText();H.style.OTransformOrigin=(C[0]*100)+"% "+(C[1]*100)+"%";H.style.OTransform=I.toCSSText();}else{K=E.textAlpha;if(q.isNumber(K)&&K<1&&K>-1&&!isNaN(K)){D="progid:DXImageTransform.Microsoft.Alpha(Opacity="+Math.round(K*100)+")";}if(B!==0){I.rotate(B);F=I.getContentRect(E.labelWidth,E.labelHeight);I.init();I.translate(F.left,F.top);I.translate(J,G);this._simulateRotateWithTransformOrigin(I,B,C,E.labelWidth,E.labelHeight);if(D){D+=" ";}else{D="";}D+=I.toFilterText();H.style.left=I.dx+"px";H.style.top=I.dy+"px";}else{H.style.left=J+"px";H.style.top=G+"px";}if(D){H.style.filter=D;}}},_simulateRotateWithTransformOrigin:function(D,C,E,B,F){var H=E[0]*B,G=E[1]*F;H=!isNaN(H)?H:0;G=!isNaN(G)?G:0;D.translate(H,G);D.rotate(C);D.translate(-H,-G);},getMaxLabelBounds:function(){return this._getLabelBounds(this.getMaximumValue());
},getMinLabelBounds:function(){return this._getLabelBounds(this.getMinimumValue());},_getLabelBounds:function(G){var F=this._layout,E=this.get("styles").label,B=new b.Matrix(),C,D=this._getTextRotationProps(E);D.transformOrigin=F._getTransformOrigin(D.rot);C=this.getLabel({x:0,y:0},E);this.get("appendLabelFunction")(C,this.get("labelFunction").apply(this,[G,this.get("labelFormat")]));D.labelWidth=C.offsetWidth;D.labelHeight=C.offsetHeight;this._removeChildren(C);b.Event.purgeElement(C,true);C.parentNode.removeChild(C);D.x=0;D.y=0;F._setRotationCoords(D);B.translate(D.x,D.y);this._simulateRotateWithTransformOrigin(B,D.rot,D.transformOrigin,D.labelWidth,D.labelHeight);return B.getContentRect(D.labelWidth,D.labelHeight);},_removeChildren:function(B){if(B.hasChildNodes()){var C;while(B.firstChild){C=B.firstChild;this._removeChildren(C);B.removeChild(C);}}},destructor:function(){var C=this.get("contentBox").getDOMNode(),F=this.get("labels"),E=this.get("graphic"),D,B=F?F.length:0;if(B>0){while(F.length>0){D=F.shift();this._removeChildren(D);C.removeChild(D);D=null;}}if(E){E.destroy();}},_maxLabelSize:0,_setText:function(B,C){B.innerHTML="";if(q.isNumber(C)){C=C+"";}else{if(!C){C="";}}if(l(C)){C=g.createTextNode(C);}B.appendChild(C);}},{ATTRS:{width:{lazyAdd:false,getter:function(){if(this._explicitWidth){return this._explicitWidth;}return this._calculatedWidth;},setter:function(B){this._explicitWidth=B;return B;}},height:{lazyAdd:false,getter:function(){if(this._explicitHeight){return this._explicitHeight;}return this._calculatedHeight;},setter:function(B){this._explicitHeight=B;return B;}},calculatedWidth:{getter:function(){return this._calculatedWidth;},setter:function(B){this._calculatedWidth=B;return B;}},calculatedHeight:{getter:function(){return this._calculatedHeight;},setter:function(B){this._calculatedHeight=B;return B;}},edgeOffset:{value:0},graphic:{},path:{readOnly:true,getter:function(){if(!this._path){var B=this.get("graphic");if(B){this._path=B.addShape({type:"path"});}}return this._path;}},tickPath:{readOnly:true,getter:function(){if(!this._tickPath){var B=this.get("graphic");if(B){this._tickPath=B.addShape({type:"path"});}}return this._tickPath;}},node:{},position:{setter:function(C){var B=this._layoutClasses[C];if(C&&C!="none"){this._layout=new B();}return C;}},topTickOffset:{value:0},bottomTickOffset:{value:0},leftTickOffset:{value:0},rightTickOffset:{value:0},labels:{readOnly:true,getter:function(){return this._labels;}},tickPoints:{readOnly:true,getter:function(){if(this.get("position")=="none"){return this.get("styles").majorUnit.count;}return this._tickPoints;}},overlapGraph:{value:true,validator:function(B){return q.isBoolean(B);}},labelFunctionScope:{},maxLabelSize:{getter:function(){return this._maxLabelSize;},setter:function(B){this._maxLabelSize=B;return B;}},title:{value:null},labelFunction:{value:function(C,B){return C;}},appendLabelFunction:{getter:function(){return this._setText;}},appendTitleFunction:{getter:function(){return this._setText;}}}});b.AxisType=b.Base.create("baseAxis",b.Axis,[],{initializer:function(){this.after("dataReady",b.bind(this._dataChangeHandler,this));this.after("dataUpdate",b.bind(this._dataChangeHandler,this));this.after("minimumChange",b.bind(this._keyChangeHandler,this));this.after("maximumChange",b.bind(this._keyChangeHandler,this));this.after("keysChange",this._keyChangeHandler);this.after("dataProviderChange",this._dataProviderChangeHandler);this.after("alwaysShowZeroChange",this._keyChangeHandler);this.after("roundingMethodChange",this._keyChangeHandler);},bindUI:function(){this.after("stylesChange",this._updateHandler);this.after("overlapGraphChange",this._updateHandler);this.after("positionChange",this._positionChangeHandler);this.after("widthChange",this._handleSizeChange);this.after("heightChange",this._handleSizeChange);this.after("calculatedWidthChange",this._handleSizeChange);this.after("calculatedHeightChange",this._handleSizeChange);},_dataProviderChangeHandler:function(E){var B=this.get("keyCollection").concat(),D=this.get("keys"),C;if(D){for(C in D){if(D.hasOwnProperty(C)){delete D[C];}}}if(B&&B.length){this.set("keys",B);}},GUID:"yuibaseaxis",_type:null,_setMaximum:null,_dataMaximum:null,_setMinimum:null,_data:null,_updateTotalDataFlag:true,_dataReady:false,addKey:function(B){this.set("keys",B);},_getKeyArray:function(E,F){var D=0,G,C=[],B=F.length;for(;D<B;++D){G=F[D];C[D]=G[E];}return C;},_setDataByKey:function(F,G){var E,H,C=[],D=this._dataClone.concat(),B=D.length;for(E=0;E<B;++E){H=D[E];C[E]=H[F];}this.get("keys")[F]=C;this._updateTotalDataFlag=true;},_updateTotalData:function(){var C=this.get("keys"),B;this._data=[];for(B in C){if(C.hasOwnProperty(B)){this._data=this._data.concat(C[B]);}}this._updateTotalDataFlag=false;},removeKey:function(C){var B=this.get("keys");if(B.hasOwnProperty(C)){delete B[C];this._keyChangeHandler();}},getKeyValueAt:function(C,B){var E=NaN,D=this.get("keys");if(D[C]&&q.isNumber(parseFloat(D[C][B]))){E=D[C][B];}return parseFloat(E);},getDataByKey:function(C){var B=this.get("keys");if(B[C]){return B[C];}return null;},_updateMinAndMax:function(){var G=this.get("data"),C=0,F=0,B,D,E;if(G&&G.length&&G.length>0){B=G.length;C=F=G[0];if(B>1){for(E=1;E<B;E++){D=G[E];if(isNaN(D)){continue;}C=Math.max(D,C);F=Math.min(D,F);}}}this._dataMaximum=C;this._dataMinimum=F;},getTotalMajorUnits:function(){var C,D=this.get("styles").majorUnit,B=this.get("length");if(D.determinant==="count"){C=D.count;}else{if(D.determinant==="distance"){C=(B/D.distance)+1;}}return C;},getMajorUnitDistance:function(B,E,C){var D;if(C.determinant==="count"){D=E/(B-1);}else{if(C.determinant==="distance"){D=C.distance;}}return D;},getEdgeOffset:function(C,B){return 0;},getLabelByIndex:function(F,C){var E=this.get("minimum"),B=this.get("maximum"),G=(B-E)/(C-1),D;C-=1;D=E+(F*G);return D;},_keyChangeHandler:function(B){this._updateMinAndMax();this.fire("dataUpdate");},_hasDataOverflow:function(){if(this.get("setMin")||this.get("setMax")){return true;
}return false;},getMinimumValue:function(){return this.get("minimum");},getMaximumValue:function(){return this.get("maximum");}},{ATTRS:{keys:{value:{},setter:function(F){var D={},C,B,E=this.get("dataProvider");if(q.isArray(F)){B=F.length;for(C=0;C<B;++C){D[F[C]]=this._getKeyArray(F[C],E);}}else{if(q.isString(F)){D=this.get("keys");D[F]=this._getKeyArray(F,E);}else{for(C in F){if(F.hasOwnProperty(C)){D[C]=this._getKeyArray(C,E);}}}}this._updateTotalDataFlag=true;return D;}},roundingMethod:{value:"niceNumber"},type:{readOnly:true,getter:function(){return this._type;}},dataProvider:{setter:function(B){return B;}},dataMaximum:{getter:function(){if(!this._dataMaximum){this._updateMinAndMax();}return this._dataMaximum;}},maximum:{lazyAdd:false,getter:function(){var B=this.get("dataMaximum"),C=this.get("minimum");if(C===0&&B===0){B=10;}if(q.isNumber(this._setMaximum)){B=this._setMaximum;}return parseFloat(B);},setter:function(B){this._setMaximum=parseFloat(B);return B;}},dataMinimum:{getter:function(){if(!this._dataMinimum){this._updateMinAndMax();}return this._dataMinimum;}},minimum:{lazyAdd:false,getter:function(){var B=this.get("dataMinimum");if(q.isNumber(this._setMinimum)){B=this._setMinimum;}return parseFloat(B);},setter:function(B){this._setMinimum=parseFloat(B);return B;}},setMax:{readOnly:true,getter:function(){return q.isNumber(this._setMaximum);}},setMin:{readOnly:true,getter:function(){return q.isNumber(this._setMinimum);}},data:{getter:function(){if(!this._data||this._updateTotalDataFlag){this._updateTotalData();}return this._data;}},keyCollection:{getter:function(){var D=this.get("keys"),C,B=[];for(C in D){if(D.hasOwnProperty(C)){B.push(C);}}return B;},readOnly:true}}});function m(B){m.superclass.constructor.apply(this,arguments);}m.NAME="numericAxis";m.ATTRS={alwaysShowZero:{value:true},labelFunction:{value:function(C,B){if(B){return b.DataType.Number.format(C,B);}return C;}},labelFormat:{value:{prefix:"",thousandsSeparator:"",decimalSeparator:"",decimalPlaces:"0",suffix:""}}};b.extend(m,b.AxisType,{getTotalByKey:function(E){var F=0,C=this.getDataByKey(E),D=0,G,B=C?C.length:0;for(;D<B;++D){G=parseFloat(C[D]);if(!isNaN(G)){F+=G;}}return F;},_type:"numeric",_getMinimumUnit:function(B,D,C){return this._getNiceNumber(Math.ceil((B-D)/C));},_getNiceNumber:function(D){var F=D,B=Math.ceil(Math.log(F)*0.4342944819032518),E=Math.pow(10,B),C;if(E/2>=F){C=Math.floor((E/2-F)/(Math.pow(10,B-1)/2));F=E/2-C*Math.pow(10,B-1)/2;}else{F=E;}if(!isNaN(F)){return F;}return D;},_updateMinAndMax:function(){var C=this.get("data"),H,B,F,E,D=0,I,J=this.get("setMax"),G=this.get("setMin");if(!J||!G){if(C&&C.length&&C.length>0){F=C.length;for(;D<F;D++){E=C[D];if(isNaN(E)){if(q.isObject(E)){B=H=0;for(I in E){if(E.hasOwnProperty(I)){H=Math.max(E[I],H);B=Math.min(E[I],B);}}}H=J?this._setMaximum:H;B=G?this._setMinimum:B;continue;}if(G){B=this._setMinimum;}else{if(B===undefined){B=E;}else{B=Math.min(E,B);}}if(J){H=this._setMaximum;}else{if(H===undefined){H=E;}else{H=Math.max(E,H);}}this._actualMaximum=H;this._actualMinimum=B;}}this._roundMinAndMax(B,H,G,J);}},_roundMinAndMax:function(H,K,I,N){var C,T,Q=H>=0,E=K>0,S,B,P,J,L,R,O,G=this.getTotalMajorUnits()-1,M=this.get("alwaysShowZero"),D=this.get("roundingMethod"),F=(K-H)/G>=1;if(D){if(D=="niceNumber"){C=this._getMinimumUnit(K,H,G);if(Q&&E){if((M||H<C)&&!I){H=0;C=this._getMinimumUnit(K,H,G);}else{H=this._roundDownToNearest(H,C);}if(N){if(!M){H=K-(C*G);}}else{if(I){K=H+(C*G);}else{K=this._roundUpToNearest(K,C);}}}else{if(E&&!Q){if(M){J=Math.round(G/((-1*H)/K+1));J=Math.max(Math.min(J,G-1),1);L=G-J;R=Math.ceil(K/J);O=Math.floor(H/L)*-1;if(I){while(O<R&&L>=0){L--;J++;R=Math.ceil(K/J);O=Math.floor(H/L)*-1;}if(L>0){K=O*J;}else{K=H+(C*G);}}else{if(N){while(R<O&&J>=0){L++;J--;O=Math.floor(H/L)*-1;R=Math.ceil(K/J);}if(J>0){H=R*L*-1;}else{H=K-(C*G);}}else{C=Math.max(R,O);C=this._getNiceNumber(C);K=C*J;H=C*L*-1;}}}else{if(N){H=K-(C*G);}else{if(I){K=H+(C*G);}else{H=this._roundDownToNearest(H,C);K=this._roundUpToNearest(K,C);}}}}else{if(I){if(M){K=0;}else{K=H+(C*G);}}else{if(!N){if(M||K===0||K+C>0){K=0;C=this._getMinimumUnit(K,H,G);}else{K=this._roundUpToNearest(K,C);}H=K-(C*G);}else{H=K-(C*G);}}}}}else{if(D=="auto"){if(Q&&E){if((M||H<(K-H)/G)&&!I){H=0;}C=(K-H)/G;if(F){C=Math.ceil(C);}K=H+(C*G);}else{if(E&&!Q){if(M){J=Math.round(G/((-1*H)/K+1));J=Math.max(Math.min(J,G-1),1);L=G-J;if(F){R=Math.ceil(K/J);O=Math.floor(H/L)*-1;}else{R=K/J;O=H/L*-1;}C=Math.max(R,O);K=C*J;H=C*L*-1;}else{C=(K-H)/G;if(F){C=Math.ceil(C);}H=this._roundDownToNearest(H,C);K=this._roundUpToNearest(K,C);}}else{C=(K-H)/G;if(F){C=Math.ceil(C);}if(M||K===0||K+C>0){K=0;C=(K-H)/G;if(F){Math.ceil(C);}}else{K=this._roundUpToNearest(K,C);}H=K-(C*G);}}}else{if(!isNaN(D)&&isFinite(D)){C=D;T=C*G;S=(K-H)>T;P=this._roundDownToNearest(H,C);B=this._roundUpToNearest(K,C);if(N){H=K-T;}else{if(I){K=H+T;}else{if(Q&&E){if(M||P<=0){H=0;}else{H=P;}K=H+T;}else{if(E&&!Q){H=P;K=H+T;}else{if(M||B>=0){K=0;}else{K=B;}H=K-T;}}}}}}}}this._dataMaximum=K;this._dataMinimum=H;},getLabelByIndex:function(F,C){var E=this.get("minimum"),B=this.get("maximum"),H=(B-E)/(C-1),D,G=this.get("roundingMethod");C-=1;if(F===0){D=E;}else{if(F===C){D=B;}else{D=(F*H);if(G=="niceNumber"){D=this._roundToNearest(D,H);}D+=E;}}return parseFloat(D);},_roundToNearest:function(D,C){C=C||1;if(C===0){return D;}var B=Math.round(this._roundToPrecision(D/C,10))*C;return this._roundToPrecision(B,10);},_roundUpToNearest:function(C,B){B=B||1;if(B===0){return C;}return Math.ceil(this._roundToPrecision(C/B,10))*B;},_roundDownToNearest:function(C,B){B=B||1;if(B===0){return C;}return Math.floor(this._roundToPrecision(C/B,10))*B;},_roundToPrecision:function(D,B){B=B||0;var C=Math.pow(10,B);return Math.round(C*D)/C;},_hasDataOverflow:function(){var D,C,B;if(this.get("setMin")||this.get("setMax")){return true;}D=this.get("roundingMethod");C=this._actualMinimum;B=this._actualMaximum;if(q.isNumber(D)&&((q.isNumber(B)&&B>this._dataMaximum)||(q.isNumber(C)&&C<this._dataMinimum))){return true;
}return false;}});b.NumericAxis=m;function e(B){e.superclass.constructor.apply(this,arguments);}e.NAME="stackedAxis";b.extend(e,b.NumericAxis,{_updateMinAndMax:function(){var I=0,C=0,H=0,B=0,F=0,D=0,J,E,K=this.get("keys"),G=this.get("setMin"),L=this.get("setMax");for(J in K){if(K.hasOwnProperty(J)){F=Math.max(F,K[J].length);}}for(;D<F;++D){H=0;B=0;for(J in K){if(K.hasOwnProperty(J)){E=K[J][D];if(isNaN(E)){continue;}if(E>=0){H+=E;}else{B+=E;}}}if(H>0){I=Math.max(I,H);}else{I=Math.max(I,B);}if(B<0){C=Math.min(C,B);}else{C=Math.min(C,H);}}this._actualMaximum=I;this._actualMinimum=C;if(L){I=this._setMaximum;}if(G){C=this._setMinimum;}this._roundMinAndMax(C,I,G,L);}});b.StackedAxis=e;function d(B){d.superclass.constructor.apply(this,arguments);}d.NAME="timeAxis";d.ATTRS={setMax:{readOnly:true,getter:function(){var B=this._getNumber(this._setMaximum);return(q.isNumber(B));}},setMin:{readOnly:true,getter:function(){var B=this._getNumber(this._setMinimum);return(q.isNumber(B));}},maximum:{getter:function(){var B=this._getNumber(this._setMaximum);if(!q.isNumber(B)){B=this._getNumber(this.get("dataMaximum"));}return parseFloat(B);},setter:function(B){this._setMaximum=this._getNumber(B);return B;}},minimum:{getter:function(){var B=this._getNumber(this._setMinimum);if(!q.isNumber(B)){B=this._getNumber(this.get("dataMinimum"));}return parseFloat(B);},setter:function(B){this._setMinimum=this._getNumber(B);return B;}},labelFunction:{value:function(C,B){C=b.DataType.Date.parse(C);if(B){return b.DataType.Date.format(C,{format:B});}return C;}},labelFormat:{value:"%b %d, %y"}};b.extend(d,b.AxisType,{GUID:"yuitimeaxis",_dataType:"time",getLabelByIndex:function(G,D){var F=this.get("minimum"),C=this.get("maximum"),B=this.get("position"),H,E;D-=1;H=((C-F)/D)*G;if(B=="bottom"||B=="top"){E=F+H;}else{E=C-H;}return E;},_getKeyArray:function(E,F){var G,C=[],D=0,H,B=F.length;for(;D<B;++D){G=F[D][E];if(q.isDate(G)){H=G.valueOf();}else{H=new Date(G);if(q.isDate(H)){H=H.valueOf();}else{if(!q.isNumber(G)){if(q.isNumber(parseFloat(G))){H=parseFloat(G);}else{if(typeof G!="string"){G=G;}H=new Date(G).valueOf();}}else{H=G;}}}C[D]=H;}return C;},_setDataByKey:function(F,G){var H,C=[],E=this._dataClone.concat(),D,I,B=E.length;for(D=0;D<B;++D){H=E[D][F];if(q.isDate(H)){I=H.valueOf();}else{I=new Date(H);if(q.isDate(I)){I=I.valueOf();}else{if(!q.isNumber(H)){if(q.isNumber(parseFloat(H))){I=parseFloat(H);}else{if(typeof H!="string"){H=H.toString();}I=new Date(H).valueOf();}}else{I=H;}}}C[D]=I;}this.get("keys")[F]=C;this._updateTotalDataFlag=true;},_getNumber:function(B){if(q.isDate(B)){B=B.valueOf();}else{if(!q.isNumber(B)&&B){B=new Date(B).valueOf();}}return B;}});b.TimeAxis=d;function f(B){f.superclass.constructor.apply(this,arguments);}f.NAME="categoryAxis";b.extend(f,b.AxisType,{_indices:null,GUID:"yuicategoryaxis",_type:"category",_updateMinAndMax:function(){this._dataMaximum=Math.max(this.get("data").length-1,0);this._dataMinimum=0;},_getKeyArray:function(E,F){var D=0,G,C=[],H=[],B=F.length;if(!this._indices){this._indices={};}for(;D<B;++D){G=F[D];C[D]=D;H[D]=G[E];}this._indices[E]=C;return H;},_setDataByKey:function(F){var E,G,C=[],H=[],D=this._dataClone.concat(),B=D.length;if(!this._indices){this._indices={};}for(E=0;E<B;++E){G=D[E];C[E]=E;H[E]=G[F];}this._indices[F]=C;this.get("keys")[F]=H.concat();this._updateTotalDataFlag=true;},getDataByKey:function(C){if(!this._indices){this.get("keys");}var B=this._indices;if(B[C]){return B[C];}return null;},getTotalMajorUnits:function(C,B){return this.get("data").length;},getMajorUnitDistance:function(B,E,C){var D;if(C.determinant==="count"){D=E/B;}else{if(C.determinant==="distance"){D=C.distance;}}return D;},getEdgeOffset:function(C,B){return B/C;},getKeyValueAt:function(C,B){var E=NaN,D=this.get("keys");if(D[C]&&D[C][B]){E=D[C][B];}return E;},getLabelByIndex:function(E,C){var D,F=this.get("data"),B=this.get("position");if(B=="bottom"||B=="top"){D=F[E];}else{D=F[C-(E+1)];}return D;},getMinimumValue:function(){var C=this.get("data"),B=C[0];return B;},getMaximumValue:function(){var D=this.get("data"),B=D.length-1,C=D[B];return C;}});b.CategoryAxis=f;function j(){}j.prototype={getCurveControlPoints:function(E,H){var F=[],D=1,C=E.length-1,B=[],G=[];if(C<1){return null;}F[0]={startx:E[0],starty:H[0],endx:E[1],endy:H[1]};if(C===1){F[0].ctrlx1=(2*E[0]+E[1])/3;F[0].ctrly2=(2*H[0]+H[1])/3;F[0].ctrlx2=2*F[0].ctrlx1-E[0];F[0].ctrly2=2*F[0].ctrly1-H[0];return F;}for(;D<C;++D){F.push({startx:Math.round(E[D]),starty:Math.round(H[D]),endx:Math.round(E[D+1]),endy:Math.round(H[D+1])});B[D]=4*E[D]+2*E[D+1];G[D]=4*H[D]+2*H[D+1];}B[0]=E[0]+(2*E[1]);B[C-1]=(8*E[C-1]+E[C])/2;B=this.getControlPoints(B.concat());G[0]=H[0]+(2*H[1]);G[C-1]=(8*H[C-1]+H[C])/2;G=this.getControlPoints(G.concat());for(D=0;D<C;++D){F[D].ctrlx1=Math.round(B[D]);F[D].ctrly1=Math.round(G[D]);if(D<C-1){F[D].ctrlx2=Math.round(2*E[D+1]-B[D+1]);F[D].ctrly2=Math.round(2*H[D+1]-G[D+1]);}else{F[D].ctrlx2=Math.round((E[C]+B[C-1])/2);F[D].ctrly2=Math.round((H[C]+G[C-1])/2);}}return F;},getControlPoints:function(G){var D=G.length,C=[],F=[],B=2,E=1;C[0]=G[0]/B;for(;E<D;++E){F[E]=1/B;B=(E<D-1?4:3.5)-F[E];C[E]=(G[E]-C[E-1])/B;}for(E=1;E<D;++E){C[D-E-1]-=F[D-E]*C[D-E];}return C;}};b.CurveUtil=j;function i(){}i.prototype={_stackCoordinates:function(){var L=this.get("direction"),D=this.get("order"),J=this.get("type"),M=this.get("graph"),G=M.get("height"),C=M.seriesTypes[J],F=0,I,K=this.get("xcoords"),E=this.get("ycoords"),H,B;if(D===0){return;}H=C[D-1].get("xcoords").concat();B=C[D-1].get("ycoords").concat();if(L==="vertical"){I=H.length;for(;F<I;++F){if(!isNaN(H[F])&&!isNaN(K[F])){K[F]+=H[F];}}}else{I=B.length;for(;F<I;++F){if(!isNaN(B[F])&&!isNaN(E[F])){E[F]=B[F]-(G-E[F]);}}}}};b.StackingUtil=i;function h(){}h.prototype={_lineDefaults:null,_getGraphic:function(){var B=this.get("graphic")||this.get("graph").get("graphic");if(!this._lineGraphic){this._lineGraphic=B.addShape({type:"path"});}this._lineGraphic.clear();return this._lineGraphic;},_toggleVisible:function(B){if(this._lineGraphic){this._lineGraphic.set("visible",B);
}},drawLines:function(){if(this.get("xcoords").length<1){return;}var I=q.isNumber,J=this.get("xcoords").concat(),Y=this.get("ycoords").concat(),U=this.get("direction"),P=U==="vertical"?Y.length:J.length,W,B,E=true,X,V,T,Q,O,F=this.get("styles").line,R=F.lineType,M=F.color||this._getDefaultColor(this.get("graphOrder"),"line"),K=F.alpha,S=F.dashLength,H=F.gapSpace,G=F.connectDiscontinuousPoints,C=F.discontinuousType,D=F.discontinuousDashLength,N=F.discontinuousGapSpace,L=this._getGraphic();L.set("stroke",{weight:F.weight,color:M,opacity:K});for(O=0;O<P;O=++O){T=J[O];Q=Y[O];B=I(T)&&I(Q);if(!B){W=B;continue;}if(E){E=false;L.moveTo(T,Q);}else{if(W){if(R!="dashed"){L.lineTo(T,Q);}else{this.drawDashedLine(L,X,V,T,Q,S,H);}}else{if(!G){L.moveTo(T,Q);}else{if(C!="solid"){this.drawDashedLine(L,X,V,T,Q,D,N);}else{L.lineTo(T,Q);}}}}X=T;V=Q;W=true;}L.end();},drawSpline:function(){if(this.get("xcoords").length<1){return;}var L=this.get("xcoords"),F=this.get("ycoords"),N=this.getCurveControlPoints(L,F),G=N.length,I,H,C,B,M,K,E=0,O=this.get("styles").line,P=this._getGraphic(),J=O.alpha,D=O.color||this._getDefaultColor(this.get("graphOrder"),"line");P.set("stroke",{weight:O.weight,color:D,opacity:J});P.moveTo(L[0],F[0]);for(;E<G;E=++E){M=N[E].endx;K=N[E].endy;I=N[E].ctrlx1;H=N[E].ctrlx2;C=N[E].ctrly1;B=N[E].ctrly2;P.curveTo(I,C,H,B,M,K);}P.end();},drawDashedLine:function(P,L,Q,B,N,D,C){D=D||10;C=C||10;var F=D+C,I=B-L,M=N-Q,O=Math.sqrt(Math.pow(I,2)+Math.pow(M,2)),G=Math.floor(Math.abs(O/F)),E=Math.atan2(M,I),K=L,J=Q,H;I=Math.cos(E)*F;M=Math.sin(E)*F;for(H=0;H<G;++H){P.moveTo(K,J);P.lineTo(K+Math.cos(E)*D,J+Math.sin(E)*D);K+=I;J+=M;}P.moveTo(K,J);O=Math.sqrt((B-K)*(B-K)+(N-J)*(N-J));if(O>D){P.lineTo(K+Math.cos(E)*D,J+Math.sin(E)*D);}else{if(O>0){P.lineTo(K+Math.cos(E)*O,J+Math.sin(E)*O);}}P.moveTo(B,N);},_getLineDefaults:function(){return{alpha:1,weight:6,lineType:"solid",dashLength:10,gapSpace:10,connectDiscontinuousPoints:true,discontinuousType:"solid",discontinuousDashLength:10,discontinuousGapSpace:10};}};b.augment(h,b.Attribute);b.Lines=h;function x(B){var C={area:{getter:function(){return this._defaults||this._getAreaDefaults();},setter:function(E){var D=this._defaults||this._getAreaDefaults();this._defaults=b.merge(D,E);}}};this.addAttrs(C,B);this.get("styles");}x.prototype={_getPath:function(){var B=this._path;if(!B){B=this.get("graph").get("graphic").addShape({type:"path"});this._path=B;}return B;},_toggleVisible:function(B){if(this._path){this._path.set("visible",B);}},drawFill:function(J,F){if(J.length<1){return;}var I=J.length,C=J[0],B=F[0],H=C,G=B,N,L,E=1,K=this.get("styles").area,M=this._getPath(),D=K.color||this._getDefaultColor(this.get("graphOrder"),"slice");M.clear();M.set("fill",{color:D,opacity:K.alpha});M.set("stroke",{weight:0});M.moveTo(C,B);for(;E<I;E=++E){N=J[E];L=F[E];if(isNaN(L)){H=N;G=L;continue;}M.lineTo(N,L);H=N;G=L;}M.end();},drawAreaSpline:function(){if(this.get("xcoords").length<1){return;}var M=this.get("xcoords"),H=this.get("ycoords"),O=this.getCurveControlPoints(M,H),I=O.length,K,J,E,D,N,L,G=0,C=M[0],B=H[0],P=this.get("styles").area,Q=this._getPath(),F=P.color||this._getDefaultColor(this.get("graphOrder"),"slice");Q.set("fill",{color:F,opacity:P.alpha});Q.set("stroke",{weight:0});Q.moveTo(C,B);for(;G<I;G=++G){N=O[G].endx;L=O[G].endy;K=O[G].ctrlx1;J=O[G].ctrlx2;E=O[G].ctrly1;D=O[G].ctrly2;Q.curveTo(K,E,J,D,N,L);}if(this.get("direction")==="vertical"){Q.lineTo(this._leftOrigin,L);Q.lineTo(this._leftOrigin,B);}else{Q.lineTo(N,this._bottomOrigin);Q.lineTo(C,this._bottomOrigin);}Q.lineTo(C,B);Q.end();},drawStackedAreaSpline:function(){if(this.get("xcoords").length<1){return;}var L=this.get("xcoords"),W=this.get("ycoords"),K,R=this.get("order"),D=this.get("type"),B=this.get("graph"),E=B.seriesTypes[D],C,O,T,N,M,V,U,I,G,S=0,J,H,F=this.get("styles").area,P=this._getPath(),Q=F.color||this._getDefaultColor(this.get("graphOrder"),"slice");J=L[0];H=W[0];K=this.getCurveControlPoints(L,W);T=K.length;P.set("fill",{color:Q,opacity:F.alpha});P.set("stroke",{weight:0});P.moveTo(J,H);for(;S<T;S=++S){I=K[S].endx;G=K[S].endy;N=K[S].ctrlx1;M=K[S].ctrlx2;V=K[S].ctrly1;U=K[S].ctrly2;P.curveTo(N,V,M,U,I,G);}if(R>0){C=E[R-1].get("xcoords").concat().reverse();O=E[R-1].get("ycoords").concat().reverse();K=this.getCurveControlPoints(C,O);S=0;T=K.length;P.lineTo(C[0],O[0]);for(;S<T;S=++S){I=K[S].endx;G=K[S].endy;N=K[S].ctrlx1;M=K[S].ctrlx2;V=K[S].ctrly1;U=K[S].ctrly2;P.curveTo(N,V,M,U,I,G);}}else{if(this.get("direction")==="vertical"){P.lineTo(this._leftOrigin,W[W.length-1]);P.lineTo(this._leftOrigin,H);}else{P.lineTo(L[L.length-1],this._bottomOrigin);P.lineTo(J,this._bottomOrigin);}}P.lineTo(J,H);P.end();},_defaults:null,_getClosingPoints:function(){var B=this.get("xcoords").concat(),C=this.get("ycoords").concat();if(this.get("direction")==="vertical"){B.push(this._leftOrigin);B.push(this._leftOrigin);C.push(C[C.length-1]);C.push(C[0]);}else{B.push(B[B.length-1]);B.push(B[0]);C.push(this._bottomOrigin);C.push(this._bottomOrigin);}B.push(B[0]);C.push(C[0]);return[B,C];},_getStackedClosingPoints:function(){var F=this.get("order"),I=this.get("type"),L=this.get("graph"),J=this.get("direction"),D=L.seriesTypes[I],H,E,K=this.get("xcoords").concat(),G=this.get("ycoords").concat(),C=K[0],B=G[0];if(F>0){H=D[F-1].get("xcoords").concat();E=D[F-1].get("ycoords").concat();K=K.concat(H.concat().reverse());G=G.concat(E.concat().reverse());K.push(K[0]);G.push(G[0]);}else{if(J==="vertical"){K.push(this._leftOrigin);K.push(this._leftOrigin);G.push(G[G.length-1]);G.push(B);}else{K.push(K[K.length-1]);K.push(C);G.push(this._bottomOrigin);G.push(this._bottomOrigin);}}return[K,G];},_getAreaDefaults:function(){return{};}};b.augment(x,b.Attribute);b.Fills=x;function w(B){var C={markers:{getter:function(){return this._markers;}}};this.addAttrs(C,B);}w.prototype={_plotDefaults:null,drawPlots:function(){if(!this.get("xcoords")||this.get("xcoords").length<1){return;}var L=q.isNumber,S=b.clone(this.get("styles").marker),K=S.width,R=S.height,M=this.get("xcoords"),T=this.get("ycoords"),P=0,Q=M.length,N=T[0],E,H,O=K/2,D=R/2,I,F,C=null,G=null,J=this.get("graphOrder"),B=this.get("groupMarkers");
if(B){I=[];F=[];for(;P<Q;++P){I.push(parseFloat(M[P]-O));F.push(parseFloat(T[P]-D));}this._createGroupMarker({xvalues:I,yvalues:F,fill:S.fill,border:S.border,dimensions:{width:K,height:R},graphOrder:J,shape:S.shape});return;}if(q.isArray(S.fill.color)){C=S.fill.color.concat();}if(q.isArray(S.border.color)){G=S.border.colors.concat();}this._createMarkerCache();for(;P<Q;++P){N=parseFloat(T[P]-D);E=parseFloat(M[P]-O);if(!L(E)||!L(N)){this._markers.push(null);continue;}if(C){S.fill.color=C[P%C.length];}if(G){S.border.colors=G[P%G.length];}S.x=E;S.y=N;H=this.getMarker(S,J,P);}this._clearMarkerCache();},_groupShapes:{circle:b.CircleGroup,rect:b.RectGroup,ellipse:b.EllipseGroup,diamond:b.DiamondGroup},_getGroupShape:function(B){if(q.isString(B)){B=this._groupShapes[B];}return B;},_getPlotDefaults:function(){var B={fill:{type:"solid",alpha:1,colors:null,alphas:null,ratios:null},border:{weight:1,alpha:1},width:10,height:10,shape:"circle"};B.fill.color=this._getDefaultColor(this.get("graphOrder"),"fill");B.border.color=this._getDefaultColor(this.get("graphOrder"),"border");return B;},_markers:null,_markerCache:null,getMarker:function(F,B,E){var C,D=F.border;F.id=this.get("chart").get("id")+"_"+B+"_"+E;D.opacity=D.alpha;F.stroke=D;F.fill.opacity=F.fill.alpha;if(this._markerCache.length>0){while(!C){if(this._markerCache.length<1){C=this._createMarker(F,B,E);break;}C=this._markerCache.shift();}C.set(F);}else{C=this._createMarker(F,B,E);}this._markers.push(C);return C;},_createMarker:function(F,B,E){var G=this.get("graphic"),D,C=b.clone(F);G.set("autoDraw",false);C.type=C.shape;D=G.addShape(C);D.addClass(n);return D;},_createMarkerCache:function(){if(this._groupMarker){this._groupMarker.destroy();this._groupMarker=null;}if(this._markers&&this._markers.length>0){this._markerCache=this._markers.concat();}else{this._markerCache=[];}this._markers=[];},_createGroupMarker:function(F){var C,G=this.get("markers"),E=F.border,H,B,D;if(G&&G.length>0){while(G.length>0){C=G.shift();C.destroy();}this.set("markers",[]);}E.opacity=E.alpha;B={id:this.get("chart").get("id")+"_"+F.graphOrder,stroke:E,fill:F.fill,dimensions:F.dimensions,xvalues:F.xvalues,yvalues:F.yvalues};B.fill.opacity=F.fill.alpha;D=this._getGroupShape(F.shape);if(D){B.type=D;}if(F.hasOwnProperty("radius")&&!isNaN(F.radius)){B.dimensions.radius=F.radius;}if(this._groupMarker){this._groupMarker.destroy();}H=this.get("graphic");H.set("autoDraw",true);this._groupMarker=H.addShape(B);},_toggleVisible:function(F){var C,E=this.get("markers"),D=0,B;if(E){B=E.length;for(;D<B;++D){C=E[D];if(C){C.set("visible",F);}}}},_clearMarkerCache:function(){var B;while(this._markerCache.length>0){B=this._markerCache.shift();if(B){B.destroy();}}},updateMarkerState:function(H,F){if(this._markers&&this._markers[F]){var J,G,K=b.clone(this.get("styles").marker),B=this._getState(H),I=this.get("xcoords"),E=this.get("ycoords"),D=this._markers[F],C=B=="off"||!K[B]?K:K[B];C.fill.color=this._getItemColor(C.fill.color,F);C.border.color=this._getItemColor(C.border.color,F);C.stroke=C.border;D.set(C);J=C.width;G=C.height;D.set("x",(I[F]-J/2));D.set("y",(E[F]-G/2));D.set("visible",this.get("visible"));}},_getItemColor:function(C,B){if(q.isArray(C)){return C[B%C.length];}return C;},_setStyles:function(B){B=this._parseMarkerStyles(B);return b.Renderer.prototype._setStyles.apply(this,[B]);},_parseMarkerStyles:function(C){if(C.marker){var B=this._getPlotDefaults();C.marker=this._mergeStyles(C.marker,B);if(C.marker.over){C.marker.over=this._mergeStyles(C.marker.over,C.marker);}if(C.marker.down){C.marker.down=this._mergeStyles(C.marker.down,C.marker);}}return C;},_getState:function(B){var C;switch(B){case"mouseout":C="off";break;case"mouseover":C="over";break;case"mouseup":C="over";break;case"mousedown":C="down";break;}return C;},_stateSyles:null};b.augment(w,b.Attribute);b.Plots=w;function z(){}z.prototype={drawSeries:function(){if(this.get("xcoords").length<1){return;}var ad=b.clone(this.get("styles").marker),T,P,L=this.get("xcoords"),M=this.get("ycoords"),ae=0,I=L.length,E=M[0],ak=this.get("type"),Y=this.get("graph"),W=Y.seriesTypes[ak],C=W.length,ab=0,ag=0,Z=0,aa,R,S=this.get("order"),ai=this.get("graphOrder"),D,aj,N,O,U,af=null,B=null,V=[],F=[],J,K,Q,ah,X={width:[],height:[]},H=[],G=[],ac=this.get("groupMarkers");if(q.isArray(ad.fill.color)){af=ad.fill.color.concat();}if(q.isArray(ad.border.color)){B=ad.border.colors.concat();}if(this.get("direction")=="vertical"){N="height";O="width";}else{N="width";O="height";}T=ad[N];P=ad[O];this._createMarkerCache();for(;ae<C;++ae){R=W[ae];ab+=R.get("styles").marker[N];if(S>ae){Z=ab;}}ag=I*ab;this._maxSize=Y.get(N);if(ag>this._maxSize){aa=Y.get(N)/ag;ab*=aa;Z*=aa;T*=aa;T=Math.max(T,1);this._maxSize=T;}Z-=ab/2;for(ae=0;ae<I;++ae){J=L[ae]-ab/2;K=J+ab;Q=M[ae]-ab/2;ah=Q+ab;V.push({start:J,end:K});F.push({start:Q,end:ah});if(isNaN(L[ae])||isNaN(M[ae])){this._markers.push(null);continue;}U=this._getMarkerDimensions(L[ae],M[ae],P,Z);if(!isNaN(U.calculatedSize)&&U.calculatedSize>0){E=U.top;D=U.left;if(ac){X[N][ae]=T;X[O][ae]=U.calculatedSize;H.push(D);G.push(E);}else{ad[N]=T;ad[O]=U.calculatedSize;ad.x=D;ad.y=E;if(af){ad.fill.color=af[ae%af.length];}if(B){ad.border.colors=B[ae%B.length];}aj=this.getMarker(ad,ai,ae);}}else{if(!ac){this._markers.push(null);}}}this.set("xMarkerPlane",V);this.set("yMarkerPlane",F);if(ac){this._createGroupMarker({fill:ad.fill,border:ad.border,dimensions:X,xvalues:H,yvalues:G,shape:ad.shape});}else{this._clearMarkerCache();}},_defaultFillColors:["#66007f","#a86f41","#295454","#996ab2","#e8cdb7","#90bdbd","#000000","#c3b8ca","#968373","#678585"],_getPlotDefaults:function(){var B={fill:{type:"solid",alpha:1,colors:null,alphas:null,ratios:null},border:{weight:0,alpha:1},width:12,height:12,shape:"rect",padding:{top:0,left:0,right:0,bottom:0}};B.fill.color=this._getDefaultColor(this.get("graphOrder"),"fill");B.border.color=this._getDefaultColor(this.get("graphOrder"),"border");return B;}};b.Histogram=z;b.CartesianSeries=b.Base.create("cartesianSeries",b.Base,[b.Renderer],{_xDisplayName:null,_yDisplayName:null,_leftOrigin:null,_bottomOrigin:null,render:function(){this._setCanvas();
this.addListeners();this.set("rendered",true);this.validate();},addListeners:function(){var C=this.get("xAxis"),B=this.get("yAxis");if(C){C.after("dataReady",b.bind(this._xDataChangeHandler,this));C.after("dataUpdate",b.bind(this._xDataChangeHandler,this));}if(B){B.after("dataReady",b.bind(this._yDataChangeHandler,this));B.after("dataUpdate",b.bind(this._yDataChangeHandler,this));}this.after("xAxisChange",this._xAxisChangeHandler);this.after("yAxisChange",this._yAxisChangeHandler);this.after("stylesChange",function(E){var D=this._updateAxisData();if(D){this.draw();}});this.after("widthChange",function(E){var D=this._updateAxisData();if(D){this.draw();}});this.after("heightChange",function(E){var D=this._updateAxisData();if(D){this.draw();}});this.after("visibleChange",this._handleVisibleChange);},_xAxisChangeHandler:function(C){var B=this.get("xAxis");B.after("dataReady",b.bind(this._xDataChangeHandler,this));B.after("dataUpdate",b.bind(this._xDataChangeHandler,this));},_yAxisChangeHandler:function(C){var B=this.get("yAxis");B.after("dataReady",b.bind(this._yDataChangeHandler,this));B.after("dataUpdate",b.bind(this._yDataChangeHandler,this));},GUID:"yuicartesianseries",_xDataChangeHandler:function(B){var C=this._updateAxisData();if(C){this.draw();}},_yDataChangeHandler:function(B){var C=this._updateAxisData();if(C){this.draw();}},_updateAxisData:function(){var F=this.get("xAxis"),C=this.get("yAxis"),D=this.get("xKey"),B=this.get("yKey"),E,G;if(!F||!C||!D||!B){return false;}G=F.getDataByKey(D);E=C.getDataByKey(B);if(!G||!E){return false;}this.set("xData",G.concat());this.set("yData",E.concat());return true;},validate:function(){if((this.get("xData")&&this.get("yData"))||this._updateAxisData()){this.draw();}else{this.fire("drawingComplete");}},_setCanvas:function(){var B=this.get("graph"),C=B.get("graphic");this.set("graphic",C);},setAreaData:function(){var S=q.isNumber,ag,ae,F=this.get("graph"),O=F.get("width"),Z=F.get("height"),M=this.get("xAxis"),C=this.get("yAxis"),H=this.get("xData").concat(),ac=this.get("yData").concat(),W,aa,aj=M.getEdgeOffset(H.length,O),L=C.getEdgeOffset(ac.length,Z),T=this.get("styles").padding,V=T.left,ad=T.top,J=O-(V+T.right+aj),Y=Z-(ad+T.bottom+L),R=[],ai=[],ah=M.get("maximum"),ab=M.get("minimum"),E=C.get("maximum"),B=C.get("minimum"),I=J/(ah-ab),P=Y/(E-B),K,af=this.get("direction"),X=0,N=[],U=[],G=this.get("xMarkerPlaneOffset"),D=this.get("yMarkerPlaneOffset"),Q=this.get("graphic");Q.set("width",O);Q.set("height",Z);K=H.length;aj*=0.5;L*=0.5;if(af==="vertical"){ac=ac.reverse();}this._leftOrigin=Math.round(((0-ab)*I)+V+aj);this._bottomOrigin=Math.round((Y+ad+L));for(;X<K;++X){W=parseFloat(H[X]);aa=parseFloat(ac[X]);if(S(W)){ag=(((W-ab)*I)+V+aj);}else{ag=NaN;}if(S(aa)){ae=((Y+ad+L)-(aa-B)*P);}else{ae=NaN;}R.push(ag);ai.push(ae);N.push({start:ag-G,end:ag+G});U.push({start:ae-D,end:ae+D});}this.set("xcoords",R);this.set("ycoords",ai);this.set("xMarkerPlane",N);this.set("yMarkerPlane",U);},draw:function(){var D=this.get("graph"),B=D.get("width"),C=D.get("height");if(this.get("rendered")){if((isFinite(B)&&isFinite(C)&&B>0&&C>0)&&((this.get("xData")&&this.get("yData"))||this._updateAxisData())){if(this._drawing){this._callLater=true;return;}this._drawing=true;this._callLater=false;this.setAreaData();if(this.get("xcoords")&&this.get("ycoords")){this.drawSeries();}this._drawing=false;if(this._callLater){this.draw();}else{this._toggleVisible(this.get("visible"));this.fire("drawingComplete");}}}},_defaultPlaneOffset:4,_getDefaultStyles:function(){return{padding:{top:0,left:0,right:0,bottom:0}};},_defaultLineColors:["#426ab3","#d09b2c","#000000","#b82837","#b384b5","#ff7200","#779de3","#cbc8ba","#7ed7a6","#007a6c"],_defaultFillColors:["#6084d0","#eeb647","#6c6b5f","#d6484f","#ce9ed1","#ff9f3b","#93b7ff","#e0ddd0","#94ecba","#309687"],_defaultBorderColors:["#205096","#b38206","#000000","#94001e","#9d6fa0","#e55b00","#5e85c9","#adab9e","#6ac291","#006457"],_defaultSliceColors:["#66007f","#a86f41","#295454","#996ab2","#e8cdb7","#90bdbd","#000000","#c3b8ca","#968373","#678585"],_getDefaultColor:function(E,F){var C={line:this._defaultLineColors,fill:this._defaultFillColors,border:this._defaultBorderColors,slice:this._defaultSliceColors},D=C[F],B=D.length;E=E||0;if(E>=B){E=E%B;}F=F||"fill";return C[F][E];},_handleVisibleChange:function(B){this._toggleVisible(this.get("visible"));},getTotalValues:function(){var B=this.get("valueAxis").getTotalByKey(this.get("valueKey"));return B;},destructor:function(){if(this._path){this._path.destroy();}if(this._lineGraphic){this._lineGraphic.destroy();this._lineGraphic=null;}if(this.get("graphic")){this.get("graphic").destroy();}}},{ATTRS:{xDisplayName:{getter:function(){return this._xDisplayName||this.get("xKey");},setter:function(B){this._xDisplayName=B.toString();return B;}},yDisplayName:{getter:function(){return this._yDisplayName||this.get("yKey");},setter:function(B){this._yDisplayName=B.toString();return B;}},categoryDisplayName:{readOnly:true,getter:function(){return this.get("direction")=="vertical"?this.get("yDisplayName"):this.get("xDisplayName");}},valueDisplayName:{readOnly:true,getter:function(){return this.get("direction")=="vertical"?this.get("xDisplayName"):this.get("yDisplayName");}},type:{value:"cartesian"},order:{},graphOrder:{},xcoords:{},ycoords:{},chart:{readOnly:true,getter:function(){return this.get("graph").get("chart");}},graph:{},xAxis:{},yAxis:{},xKey:{setter:function(B){return B.toString();}},yKey:{setter:function(B){return B.toString();}},xData:{},yData:{},rendered:{value:false},width:{readOnly:true,getter:function(){this.get("graph").get("width");}},height:{readOnly:true,getter:function(){this.get("graph").get("height");}},visible:{value:true},xMarkerPlane:{},yMarkerPlane:{},xMarkerPlaneOffset:{getter:function(){var B=this.get("styles").marker;if(B&&B.width&&isFinite(B.width)){return B.width*0.5;}return this._defaultPlaneOffset;}},yMarkerPlaneOffset:{getter:function(){var B=this.get("styles").marker;if(B&&B.height&&isFinite(B.height)){return B.height*0.5;
}return this._defaultPlaneOffset;}},direction:{value:"horizontal"},groupMarkers:{getter:function(){if(this._groupMarkers===undefined){return this.get("graph").get("groupMarkers");}else{return this._groupMarkers;}},setter:function(B){this._groupMarkers=B;return B;}}}});b.MarkerSeries=b.Base.create("markerSeries",b.CartesianSeries,[b.Plots],{drawSeries:function(){this.drawPlots();},_setStyles:function(B){if(!B.marker){B={marker:B};}B=this._parseMarkerStyles(B);return b.MarkerSeries.superclass._mergeStyles.apply(this,[B,this._getDefaultStyles()]);},_getDefaultStyles:function(){var B=this._mergeStyles({marker:this._getPlotDefaults()},b.MarkerSeries.superclass._getDefaultStyles());return B;}},{ATTRS:{type:{value:"marker"}}});b.LineSeries=b.Base.create("lineSeries",b.CartesianSeries,[b.Lines],{drawSeries:function(){this.drawLines();},_setStyles:function(B){if(!B.line){B={line:B};}return b.LineSeries.superclass._setStyles.apply(this,[B]);},_getDefaultStyles:function(){var B=this._mergeStyles({line:this._getLineDefaults()},b.LineSeries.superclass._getDefaultStyles());return B;}},{ATTRS:{type:{value:"line"}}});b.SplineSeries=b.Base.create("splineSeries",b.LineSeries,[b.CurveUtil,b.Lines],{drawSeries:function(){this.drawSpline();}},{ATTRS:{type:{value:"spline"}}});b.AreaSplineSeries=b.Base.create("areaSplineSeries",b.CartesianSeries,[b.Fills,b.CurveUtil],{drawSeries:function(){this.drawAreaSpline();}},{ATTRS:{type:{value:"areaSpline"}}});b.StackedSplineSeries=b.Base.create("stackedSplineSeries",b.SplineSeries,[b.StackingUtil],{setAreaData:function(){b.StackedSplineSeries.superclass.setAreaData.apply(this);this._stackCoordinates.apply(this);}},{ATTRS:{type:{value:"stackedSpline"}}});b.StackedMarkerSeries=b.Base.create("stackedMarkerSeries",b.MarkerSeries,[b.StackingUtil],{setAreaData:function(){b.StackedMarkerSeries.superclass.setAreaData.apply(this);this._stackCoordinates.apply(this);}},{ATTRS:{type:{value:"stackedMarker"}}});b.ColumnSeries=b.Base.create("columnSeries",b.MarkerSeries,[b.Histogram],{_getMarkerDimensions:function(C,B,E,F){var D={left:C+F};if(this._bottomOrigin>=B){D.top=B;D.calculatedSize=this._bottomOrigin-D.top;}else{D.top=this._bottomOrigin;D.calculatedSize=B-this._bottomOrigin;}return D;},updateMarkerState:function(D,P){if(this._markers&&this._markers[P]){var J=b.clone(this.get("styles").marker),T,E=this._getState(D),L=this.get("xcoords"),U=this.get("ycoords"),G=this._markers[P],R,B=this.get("graph"),C,H=B.seriesTypes[this.get("type")],Q=H.length,K=0,F=0,N,M=0,I=[],O=this.get("order"),S;T=E=="off"||!J[E]?b.clone(J):b.clone(J[E]);T.fill.color=this._getItemColor(T.fill.color,P);T.border.color=this._getItemColor(T.border.color,P);S=this._getMarkerDimensions(L[P],U[P],J.width,F);T.height=S.calculatedSize;T.width=Math.min(this._maxSize,T.width);G.set(T);for(;M<Q;++M){I[M]=L[P]+K;C=H[M].get("styles").marker;K+=Math.min(this._maxSize,C.width);if(O>M){F=K;}F-=K/2;}for(M=0;M<Q;++M){R=H[M].get("markers");if(R){N=R[P];if(N&&N!==undefined){N.set("x",(I[M]-K/2));}}}}}},{ATTRS:{type:{value:"column"}}});b.BarSeries=b.Base.create("barSeries",b.MarkerSeries,[b.Histogram],{_getMarkerDimensions:function(C,B,E,F){var D={top:B+F};if(C>=this._leftOrigin){D.left=this._leftOrigin;D.calculatedSize=C-D.left;}else{D.left=C;D.calculatedSize=this._leftOrigin-C;}return D;},updateMarkerState:function(D,P){if(this._markers&&this._markers[P]){var I=b.clone(this.get("styles").marker),T,E=this._getState(D),K=this.get("xcoords"),U=this.get("ycoords"),G=this._markers[P],R,B=this.get("graph"),H=B.seriesTypes[this.get("type")],Q=H.length,C,J=0,F=0,M,L=0,O=[],N=this.get("order"),S;T=E=="off"||!I[E]?I:I[E];T.fill.color=this._getItemColor(T.fill.color,P);T.border.color=this._getItemColor(T.border.color,P);S=this._getMarkerDimensions(K[P],U[P],I.height,F);T.width=S.calculatedSize;T.height=Math.min(this._maxSize,T.height);G.set(T);for(;L<Q;++L){O[L]=U[P]+J;C=H[L].get("styles").marker;J+=Math.min(this._maxSize,C.height);if(N>L){F=J;}F-=J/2;}for(L=0;L<Q;++L){R=H[L].get("markers");if(R){M=R[P];if(M&&M!==undefined){M.set("y",(O[L]-J/2));}}}}}},{ATTRS:{type:{value:"bar"},direction:{value:"vertical"}}});b.AreaSeries=b.Base.create("areaSeries",b.CartesianSeries,[b.Fills],{drawSeries:function(){this.drawFill.apply(this,this._getClosingPoints());},_setStyles:function(B){if(!B.area){B={area:B};}return b.AreaSeries.superclass._setStyles.apply(this,[B]);},_getDefaultStyles:function(){var B=this._mergeStyles({area:this._getAreaDefaults()},b.AreaSeries.superclass._getDefaultStyles());return B;}},{ATTRS:{type:{value:"area"}}});b.StackedAreaSplineSeries=b.Base.create("stackedAreaSplineSeries",b.AreaSeries,[b.CurveUtil,b.StackingUtil],{drawSeries:function(){this._stackCoordinates();this.drawStackedAreaSpline();}},{ATTRS:{type:{value:"stackedAreaSpline"}}});b.ComboSeries=b.Base.create("comboSeries",b.CartesianSeries,[b.Fills,b.Lines,b.Plots],{drawSeries:function(){if(this.get("showAreaFill")){this.drawFill.apply(this,this._getClosingPoints());}if(this.get("showLines")){this.drawLines();}if(this.get("showMarkers")){this.drawPlots();}},_toggleVisible:function(F){var E,C,B,D;if(this.get("showAreaFill")&&this._path){this._path.set("visible",F);}if(this.get("showLines")&&this._lineGraphic){this._lineGraphic.set("visible",F);}if(this.get("showMarkers")){E=this.get("markers");if(E){D=0;B=E.length;for(;D<B;++D){C=E[D];if(C){C.set("visible",F);}}}}},_getDefaultStyles:function(){var B=b.ComboSeries.superclass._getDefaultStyles();B.line=this._getLineDefaults();B.marker=this._getPlotDefaults();B.area=this._getAreaDefaults();return B;}},{ATTRS:{type:{value:"combo"},showAreaFill:{value:false},showLines:{value:true},showMarkers:{value:true},marker:{lazyAdd:false,getter:function(){return this.get("styles").marker;},setter:function(B){this.set("styles",{marker:B});}},line:{lazyAdd:false,getter:function(){return this.get("styles").line;},setter:function(B){this.set("styles",{line:B});}},area:{lazyAdd:false,getter:function(){return this.get("styles").area;},setter:function(B){this.set("styles",{area:B});
}}}});b.StackedComboSeries=b.Base.create("stackedComboSeries",b.ComboSeries,[b.StackingUtil],{setAreaData:function(){b.StackedComboSeries.superclass.setAreaData.apply(this);this._stackCoordinates.apply(this);},drawSeries:function(){if(this.get("showAreaFill")){this.drawFill.apply(this,this._getStackedClosingPoints());}if(this.get("showLines")){this.drawLines();}if(this.get("showMarkers")){this.drawPlots();}}},{ATTRS:{type:{value:"stackedCombo"},showAreaFill:{value:true}}});b.ComboSplineSeries=b.Base.create("comboSplineSeries",b.ComboSeries,[b.CurveUtil],{drawSeries:function(){if(this.get("showAreaFill")){this.drawAreaSpline();}if(this.get("showLines")){this.drawSpline();}if(this.get("showMarkers")){this.drawPlots();}}},{ATTRS:{type:{value:"comboSpline"}}});b.StackedComboSplineSeries=b.Base.create("stackedComboSplineSeries",b.StackedComboSeries,[b.CurveUtil],{drawSeries:function(){if(this.get("showAreaFill")){this.drawStackedAreaSpline();}if(this.get("showLines")){this.drawSpline();}if(this.get("showMarkers")){this.drawPlots();}}},{ATTRS:{type:{value:"stackedComboSpline"},showAreaFill:{value:true}}});b.StackedLineSeries=b.Base.create("stackedLineSeries",b.LineSeries,[b.StackingUtil],{setAreaData:function(){b.StackedLineSeries.superclass.setAreaData.apply(this);this._stackCoordinates.apply(this);}},{ATTRS:{type:{value:"stackedLine"}}});b.StackedAreaSeries=b.Base.create("stackedAreaSeries",b.AreaSeries,[b.StackingUtil],{setAreaData:function(){b.StackedAreaSeries.superclass.setAreaData.apply(this);this._stackCoordinates.apply(this);},drawSeries:function(){this.drawFill.apply(this,this._getStackedClosingPoints());}},{ATTRS:{type:{value:"stackedArea"}}});b.StackedColumnSeries=b.Base.create("stackedColumnSeries",b.ColumnSeries,[b.StackingUtil],{drawSeries:function(){if(this.get("xcoords").length<1){return;}var T=q.isNumber,ab=b.clone(this.get("styles").marker),S=ab.width,aa=ab.height,U=this.get("xcoords"),ac=this.get("ycoords"),Y=0,Z=U.length,V=ac[0],G=this.get("type"),E=this.get("graph"),P=E.seriesTypes[G],N,X=this.get("order"),R=this.get("graphOrder"),H,O,C,M,K,Q,W,D=X===0,F=Z*S,J={width:[],height:[]},L=[],I=[],B=this.get("groupMarkers");if(q.isArray(ab.fill.color)){C=ab.fill.color.concat();}if(q.isArray(ab.border.color)){M=ab.border.colors.concat();}this._createMarkerCache();if(F>this.get("width")){N=this.width/F;S*=N;S=Math.max(S,1);}if(!D){K=P[X-1];Q=K.get("negativeBaseValues");W=K.get("positiveBaseValues");if(!Q||!W){D=true;W=[];Q=[];}}else{Q=[];W=[];}this.set("negativeBaseValues",Q);this.set("positiveBaseValues",W);for(Y=0;Y<Z;++Y){H=U[Y];V=ac[Y];if(!T(V)||!T(H)){if(D){Q[Y]=this._bottomOrigin;W[Y]=this._bottomOrigin;}this._markers.push(null);continue;}if(D){aa=Math.abs(this._bottomOrigin-V);if(V<this._bottomOrigin){W[Y]=V;Q[Y]=this._bottomOrigin;}else{if(V>this._bottomOrigin){W[Y]=this._bottomOrigin;Q[Y]=V;V-=aa;}else{W[Y]=V;Q[Y]=V;}}}else{if(V>this._bottomOrigin){V+=(Q[Y]-this._bottomOrigin);aa=V-Q[Y];Q[Y]=V;V-=aa;}else{if(V<=this._bottomOrigin){V=W[Y]-(this._bottomOrigin-V);aa=W[Y]-V;W[Y]=V;}}}if(!isNaN(aa)&&aa>0){H-=S/2;if(B){J.width[Y]=S;J.height[Y]=aa;L.push(H);I.push(V);}else{ab.width=S;ab.height=aa;ab.x=H;ab.y=V;if(C){ab.fill.color=C[Y%C.length];}if(M){ab.border.color=M[Y%M.length];}O=this.getMarker(ab,R,Y);}}else{if(!B){this._markers.push(null);}}}if(B){this._createGroupMarker({fill:ab.fill,border:ab.border,dimensions:J,xvalues:L,yvalues:I,shape:ab.shape});}else{this._clearMarkerCache();}},updateMarkerState:function(I,G){if(this._markers&&this._markers[G]){var K,D,B=this._getState(I),J=this.get("xcoords"),H=this._markers[G],F=0,C,E;K=this.get("styles").marker;F=K.width*0.5;D=B=="off"||!K[B]?b.clone(K):b.clone(K[B]);D.height=H.get("height");D.x=(J[G]-F);D.y=H.get("y");D.id=H.get("id");C=D.fill.color;E=D.border.color;if(q.isArray(C)){D.fill.color=C[G%C.length];}else{D.fill.color=this._getItemColor(D.fill.color,G);}if(q.isArray(E)){D.border.color=E[G%E.length];}else{D.border.color=this._getItemColor(D.border.color,G);}H.set(D);}},_getPlotDefaults:function(){var B={fill:{type:"solid",alpha:1,colors:null,alphas:null,ratios:null},border:{weight:0,alpha:1},width:24,height:24,shape:"rect",padding:{top:0,left:0,right:0,bottom:0}};B.fill.color=this._getDefaultColor(this.get("graphOrder"),"fill");B.border.color=this._getDefaultColor(this.get("graphOrder"),"border");return B;}},{ATTRS:{type:{value:"stackedColumn"},negativeBaseValues:{value:null},positiveBaseValues:{value:null}}});b.StackedBarSeries=b.Base.create("stackedBarSeries",b.BarSeries,[b.StackingUtil],{drawSeries:function(){if(this.get("xcoords").length<1){return;}var S=q.isNumber,aa=b.clone(this.get("styles").marker),R=aa.width,Z=aa.height,T=this.get("xcoords"),ac=this.get("ycoords"),X=0,Y=T.length,U=ac[0],F=this.get("type"),E=this.get("graph"),O=E.seriesTypes[F],M,W=this.get("order"),Q=this.get("graphOrder"),G,N,J,P,V,C,L,D=W===0,ab=Y*Z,I={width:[],height:[]},K=[],H=[],B=this.get("groupMarkers");if(q.isArray(aa.fill.color)){C=aa.fill.color.concat();}if(q.isArray(aa.border.color)){L=aa.border.colors.concat();}this._createMarkerCache();if(ab>this.get("height")){M=this.height/ab;Z*=M;Z=Math.max(Z,1);}if(!D){J=O[W-1];P=J.get("negativeBaseValues");V=J.get("positiveBaseValues");if(!P||!V){D=true;V=[];P=[];}}else{P=[];V=[];}this.set("negativeBaseValues",P);this.set("positiveBaseValues",V);for(X=0;X<Y;++X){U=ac[X];G=T[X];if(!S(U)||!S(G)){if(D){V[X]=this._leftOrigin;P[X]=this._leftOrigin;}this._markers.push(null);continue;}if(D){R=Math.abs(G-this._leftOrigin);if(G>this._leftOrigin){V[X]=G;P[X]=this._leftOrigin;G-=R;}else{if(G<this._leftOrigin){V[X]=this._leftOrigin;P[X]=G;}else{V[X]=G;P[X]=this._leftOrigin;}}}else{if(G<this._leftOrigin){G=P[X]-(this._leftOrigin-T[X]);R=P[X]-G;P[X]=G;}else{if(G>=this._leftOrigin){G+=(V[X]-this._leftOrigin);R=G-V[X];V[X]=G;G-=R;}}}if(!isNaN(R)&&R>0){U-=Z/2;if(B){I.width[X]=R;I.height[X]=Z;K.push(G);H.push(U);}else{aa.width=R;aa.height=Z;aa.x=G;aa.y=U;if(C){aa.fill.color=C[X%C.length];}if(L){aa.border.color=L[X%L.length];
}N=this.getMarker(aa,Q,X);}}else{if(!B){this._markers.push(null);}}}if(B){this._createGroupMarker({fill:aa.fill,border:aa.border,dimensions:I,xvalues:K,yvalues:H,shape:aa.shape});}else{this._clearMarkerCache();}},updateMarkerState:function(J,G){if(this._markers[G]){var B=this._getState(J),F=this.get("ycoords"),H=this._markers[G],K=this.get("styles").marker,I=K.height,D=B=="off"||!K[B]?b.clone(K):b.clone(K[B]),C,E;D.y=(F[G]-I/2);D.x=H.get("x");D.width=H.get("width");D.id=H.get("id");C=D.fill.color;E=D.border.color;if(q.isArray(C)){D.fill.color=C[G%C.length];}else{D.fill.color=this._getItemColor(D.fill.color,G);}if(q.isArray(E)){D.border.color=E[G%E.length];}else{D.border.color=this._getItemColor(D.border.color,G);}H.set(D);}},_getPlotDefaults:function(){var B={fill:{type:"solid",alpha:1,colors:null,alphas:null,ratios:null},border:{weight:0,alpha:1},width:24,height:24,shape:"rect",padding:{top:0,left:0,right:0,bottom:0}};B.fill.color=this._getDefaultColor(this.get("graphOrder"),"fill");B.border.color=this._getDefaultColor(this.get("graphOrder"),"border");return B;}},{ATTRS:{type:{value:"stackedBar"},direction:{value:"vertical"},negativeBaseValues:{value:null},positiveBaseValues:{value:null}}});b.PieSeries=b.Base.create("pieSeries",b.MarkerSeries,[],{_map:null,_image:null,_setMap:function(){var D="pieHotSpotMapi_"+Math.round(100000*Math.random()),B=this.get("graph").get("contentBox"),C;if(this._image){B.removeChild(this._image);while(this._areaNodes&&this._areaNodes.length>0){C=this._areaNodes.shift();this._map.removeChild(C);}B.removeChild(this._map);}this._image=g.createElement("img");this._image.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAABCAYAAAD9yd/wAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABJJREFUeNpiZGBgSGPAAgACDAAIkABoFyloZQAAAABJRU5ErkJggg==";B.appendChild(this._image);this._image.setAttribute("usemap","#"+D);this._image.style.zIndex=3;this._image.style.opacity=0;this._image.setAttribute("alt","imagemap");this._map=g.createElement("map");this._map.style.zIndex=5;B.appendChild(this._map);this._map.setAttribute("name",D);this._map.setAttribute("id",D);this._areaNodes=[];},_categoryDisplayName:null,_valueDisplayName:null,addListeners:function(){var B=this.get("categoryAxis"),C=this.get("valueAxis");if(B){B.after("dataReady",b.bind(this._categoryDataChangeHandler,this));B.after("dataUpdate",b.bind(this._categoryDataChangeHandler,this));}if(C){C.after("dataReady",b.bind(this._valueDataChangeHandler,this));C.after("dataUpdate",b.bind(this._valueDataChangeHandler,this));}this.after("categoryAxisChange",this.categoryAxisChangeHandler);this.after("valueAxisChange",this.valueAxisChangeHandler);this.after("stylesChange",this._updateHandler);},validate:function(){this.draw();this._renderered=true;},_categoryAxisChangeHandler:function(B){var C=this.get("categoryAxis");C.after("dataReady",b.bind(this._categoryDataChangeHandler,this));C.after("dataUpdate",b.bind(this._categoryDataChangeHandler,this));},_valueAxisChangeHandler:function(B){var C=this.get("valueAxis");C.after("dataReady",b.bind(this._valueDataChangeHandler,this));C.after("dataUpdate",b.bind(this._valueDataChangeHandler,this));},GUID:"pieseries",_categoryDataChangeHandler:function(B){if(this._rendered&&this.get("categoryKey")&&this.get("valueKey")){this.draw();}},_valueDataChangeHandler:function(B){if(this._rendered&&this.get("categoryKey")&&this.get("valueKey")){this.draw();}},draw:function(){var D=this.get("graph"),B=D.get("width"),C=D.get("height");if(isFinite(B)&&isFinite(C)&&B>0&&C>0){this._rendered=true;if(this._drawing){this._callLater=true;return;}this._drawing=true;this._callLater=false;this.drawSeries();this._drawing=false;if(this._callLater){this.draw();}else{this.fire("drawingComplete");}}},drawPlots:function(){var D=this.get("valueAxis").getDataByKey(this.get("valueKey")).concat(),E=this.get("categoryAxis").getDataByKey(this.get("categoryKey")).concat(),H=0,ag=D.length,P=this.get("styles").marker,B=P.fill.colors,ah=P.fill.alphas||["1"],L=P.border.colors,F=[P.border.weight],G=[P.border.alpha],ai=F.concat(),R=L.concat(),T=G.concat(),ad,af,U=P.padding,C=this.get("graph"),N=Math.min(C.get("width"),C.get("height")),S=N-(U.left+U.right),ac=N-(U.top+U.bottom),aa=-90,M=S/2,V=ac/2,I=Math.min(M,V),ab=0,Y,ae=0,X,Z,J,Q,K,O=this.get("graphOrder"),W=b.Graphic.NAME=="canvasGraphic";for(;ab<ag;++ab){Y=parseFloat(D[ab]);D.push(Y);if(!isNaN(Y)){H+=Y;}}ad=B?B.concat():null;af=ah?ah.concat():null;this._createMarkerCache();if(W){this._setMap();this._image.width=S;this._image.height=ac;}for(ab=0;ab<ag;ab++){Y=D[ab];if(H===0){ae=360/D.length;}else{ae=360*(Y/H);}if(ad&&ad.length<1){ad=B.concat();}if(af&&af.length<1){af=ah.concat();}if(ai&&ai.length<1){ai=F.concat();}if(ai&&R.length<1){R=L.concat();}if(T&&T.length<1){T=G.concat();}J=ai?ai.shift():null;X=R?R.shift():null;Z=T?T.shift():null;aa+=ae;Q={border:{color:X,weight:J,alpha:Z},fill:{color:ad?ad.shift():this._getDefaultColor(ab,"slice"),alpha:af?af.shift():null},type:"pieslice",arc:ae,radius:I,startAngle:aa,cx:M,cy:V,width:S,height:ac};K=this.getMarker(Q,O,ab);if(W){this._addHotspot(Q,O,ab);}}this._clearMarkerCache();},_addHotspot:function(E,R,F){var O=g.createElement("area"),Q=1,K=E.cx,I=E.cy,H=E.arc,P=E.startAngle-H,N=E.startAngle,C=E.radius,L=K+Math.cos(P/180*Math.PI)*C,J=I+Math.sin(P/180*Math.PI)*C,T=K+Math.cos(N/180*Math.PI)*C,S=I+Math.sin(N/180*Math.PI)*C,W=Math.floor(H/10)-1,D=(H/(Math.floor(H/10))/180)*Math.PI,G=Math.atan((J-I)/(L-K)),V=K+", "+I+", "+L+", "+J,U,M,B;for(Q=1;Q<=W;++Q){B=D*Q;U=Math.cos(G+B);M=Math.sin(G+B);if(P<=90){V+=", "+(K+(C*Math.cos(G+(D*Q))));V+=", "+(I+(C*Math.sin(G+(D*Q))));}else{V+=", "+(K-(C*Math.cos(G+(D*Q))));V+=", "+(I-(C*Math.sin(G+(D*Q))));}}V+=", "+T+", "+S;V+=", "+K+", "+I;this._map.appendChild(O);O.setAttribute("class",n);O.setAttribute("id","hotSpot_"+R+"_"+F);O.setAttribute("shape","polygon");O.setAttribute("coords",V);this._areaNodes.push(O);},updateMarkerState:function(F,D){if(this._markers[D]){var H=this._getState(F),C,E,B=this._markers[D],G=this.get("styles").marker;
C=H=="off"||!G[H]?G:G[H];E=this._mergeStyles(C,{});E.fill.color=E.fill.colors[D%E.fill.colors.length];E.fill.alpha=E.fill.alphas[D%E.fill.alphas.length];B.set(E);}},_createMarker:function(F,B,E){var G=this.get("graphic"),D,C=b.clone(F);G.set("autoDraw",false);D=G.addShape(C);D.addClass(n);return D;},_clearMarkerCache:function(){var B=this._markerCache.length,D=0,C;for(;D<B;++D){C=this._markerCache[D];if(C){C.destroy();}}this._markerCache=[];},_getPlotDefaults:function(){var B={padding:{top:0,left:0,right:0,bottom:0},fill:{alphas:["1"]},border:{weight:0,alpha:1}};B.fill.colors=this._defaultSliceColors;B.border.colors=this._defaultBorderColors;return B;},_defaultLineColors:["#426ab3","#d09b2c","#000000","#b82837","#b384b5","#ff7200","#779de3","#cbc8ba","#7ed7a6","#007a6c"],_defaultFillColors:["#6084d0","#eeb647","#6c6b5f","#d6484f","#ce9ed1","#ff9f3b","#93b7ff","#e0ddd0","#94ecba","#309687"],_defaultBorderColors:["#205096","#b38206","#000000","#94001e","#9d6fa0","#e55b00","#5e85c9","#adab9e","#6ac291","#006457"],_defaultSliceColors:["#66007f","#a86f41","#295454","#996ab2","#e8cdb7","#90bdbd","#000000","#c3b8ca","#968373","#678585"],_getDefaultColor:function(E,F){var C={line:this._defaultLineColors,fill:this._defaultFillColors,border:this._defaultBorderColors,slice:this._defaultSliceColors},D=C[F],B=D.length;E=E||0;if(E>=B){E=E%B;}F=F||"fill";return C[F][E];}},{ATTRS:{type:{value:"pie"},order:{},graph:{},categoryAxis:{value:null,validator:function(B){return B!==this.get("categoryAxis");}},valueAxis:{value:null,validator:function(B){return B!==this.get("valueAxis");}},categoryKey:{value:null,validator:function(B){return B!==this.get("categoryKey");}},valueKey:{value:null,validator:function(B){return B!==this.get("valueKey");}},categoryDisplayName:{setter:function(B){this._categoryDisplayName=B;return B;},getter:function(){return this._categoryDisplayName||this.get("categoryKey");}},valueDisplayName:{setter:function(B){this._valueDisplayName=B;return B;},getter:function(){return this._valueDisplayName||this.get("valueKey");}},slices:null}});b.Gridlines=b.Base.create("gridlines",b.Base,[b.Renderer],{_path:null,remove:function(){var B=this._path;if(B){B.destroy();}},draw:function(){if(this.get("axis")&&this.get("graph")){this._drawGridlines();}},_drawGridlines:function(){var P,B=this.get("axis"),J=B.get("position"),M,G=0,D,K=this.get("direction"),N=this.get("graph"),L=N.get("width"),I=N.get("height"),O=this.get("styles").line,F=O.color,H=O.weight,E=O.alpha,C=K=="vertical"?this._verticalLine:this._horizontalLine;if(isFinite(L)&&isFinite(I)&&L>0&&I>0){if(J!="none"&&B&&B.get("tickPoints")){M=B.get("tickPoints");D=M.length;}else{M=[];D=B.get("styles").majorUnit.count;for(;G<D;++G){M[G]={x:L*(G/(D-1)),y:I*(G/(D-1))};}G=0;}P=N.get("gridlines");P.set("width",L);P.set("height",I);P.set("stroke",{weight:H,color:F,opacity:E});for(;G<D;++G){C(P,M[G],L,I);}P.end();}},_horizontalLine:function(E,D,B,C){E.moveTo(0,D.y);E.lineTo(B,D.y);},_verticalLine:function(E,D,B,C){E.moveTo(D.x,0);E.lineTo(D.x,C);},_getDefaultStyles:function(){var B={line:{color:"#f0efe9",weight:1,alpha:1}};return B;}},{ATTRS:{direction:{},axis:{},graph:{}}});b.Graph=b.Base.create("graph",b.Widget,[b.Renderer],{bindUI:function(){var B=this.get("boundingBox");B.setStyle("position","absolute");this.after("widthChange",this._sizeChangeHandler);this.after("heightChange",this._sizeChangeHandler);this.after("stylesChange",this._updateStyles);},syncUI:function(){var B,E,F,J=this.get("seriesCollection"),G,H=0,I=J.length,C=this.get("horizontalGridlines"),D=this.get("verticalGridlines");if(this.get("showBackground")){B=this.get("background");E=this.get("contentBox");F=this.get("styles").background;F.stroke=F.border;F.stroke.opacity=F.stroke.alpha;F.fill.opacity=F.fill.alpha;F.width=this.get("width");F.height=this.get("height");F.type=F.shape;B.set(F);}for(;H<I;++H){G=J[H];if(G instanceof b.CartesianSeries){G.render();}}if(C&&C instanceof b.Gridlines){C.draw();}if(D&&D instanceof b.Gridlines){D.draw();}},seriesTypes:null,getSeriesByIndex:function(D){var B=this.get("seriesCollection"),C;if(B&&B.length>D){C=B[D];}return C;},getSeriesByKey:function(D){var C=this._seriesDictionary,B;if(C&&C.hasOwnProperty(D)){B=C[D];}return B;},addDispatcher:function(B){if(!this._dispatchers){this._dispatchers=[];}this._dispatchers.push(B);},_seriesCollection:null,_seriesDictionary:null,_parseSeriesCollection:function(F){if(!F){return;}var C=F.length,E=0,D,B;if(!this.get("seriesCollection")){this._seriesCollection=[];}if(!this._seriesDictionary){this._seriesDictionary={};}if(!this.seriesTypes){this.seriesTypes=[];}for(;E<C;++E){D=F[E];if(!(D instanceof b.CartesianSeries)&&!(D instanceof b.PieSeries)){this._createSeries(D);continue;}this._addSeries(D);}C=this.get("seriesCollection").length;for(E=0;E<C;++E){D=this.get("seriesCollection")[E];B=D.get("direction")=="horizontal"?"yKey":"xKey";this._seriesDictionary[D.get(B)]=D;}},_addSeries:function(D){var E=D.get("type"),G=this.get("seriesCollection"),F=G.length,C=this.seriesTypes,B;if(!D.get("graph")){D.set("graph",this);}G.push(D);if(!C.hasOwnProperty(E)){this.seriesTypes[E]=[];}B=this.seriesTypes[E];D.set("graphOrder",F);D.set("order",B.length);B.push(D);this.addDispatcher(D);D.after("drawingComplete",b.bind(this._drawingCompleteHandler,this));this.fire("seriesAdded",D);},_createSeries:function(F){var G=F.type,H=this.get("seriesCollection"),D=this.seriesTypes,C,B,E;F.graph=this;if(!D.hasOwnProperty(G)){D[G]=[];}C=D[G];F.graph=this;F.order=C.length;F.graphOrder=H.length;B=this._getSeries(F.type);E=new B(F);this.addDispatcher(E);E.after("drawingComplete",b.bind(this._drawingCompleteHandler,this));C.push(E);H.push(E);},_seriesMap:{line:b.LineSeries,column:b.ColumnSeries,bar:b.BarSeries,area:b.AreaSeries,candlestick:b.CandlestickSeries,ohlc:b.OHLCSeries,stackedarea:b.StackedAreaSeries,stackedline:b.StackedLineSeries,stackedcolumn:b.StackedColumnSeries,stackedbar:b.StackedBarSeries,markerseries:b.MarkerSeries,spline:b.SplineSeries,areaspline:b.AreaSplineSeries,stackedspline:b.StackedSplineSeries,stackedareaspline:b.StackedAreaSplineSeries,stackedmarkerseries:b.StackedMarkerSeries,pie:b.PieSeries,combo:b.ComboSeries,stackedcombo:b.StackedComboSeries,combospline:b.ComboSplineSeries,stackedcombospline:b.StackedComboSplineSeries},_getSeries:function(B){var C;
if(q.isString(B)){C=this._seriesMap[B];}else{C=B;}return C;},_markerEventHandler:function(G){var E=G.type,B=G.currentTarget,F=B.getAttribute("id").split("_"),D=this.getSeriesByIndex(F[1]),C=F[2];D.updateMarkerState(E,C);},_dispatchers:null,_updateStyles:function(){var C=this.get("styles").background,B=C.border;B.opacity=B.alpha;C.stroke=B;C.fill.opacity=C.fill.alpha;this.get("background").set(C);this._sizeChangeHandler();},_sizeChangeHandler:function(H){var B=this.get("horizontalGridlines"),I=this.get("verticalGridlines"),C=this.get("width"),F=this.get("height"),E=this.get("styles").background,G,D;if(E&&E.border){G=E.border.weight||0;}if(this.get("showBackground")){D=this.get("background");if(C&&F){D.set("width",C);D.set("height",F);}}if(this._gridlines){this._gridlines.clear();}if(B&&B instanceof b.Gridlines){B.draw();}if(I&&I instanceof b.Gridlines){I.draw();}this._drawSeries();},_drawSeries:function(){if(this._drawing){this._callLater=true;return;}var D,C,B,E=this.get("graphic");E.set("autoDraw",false);this._callLater=false;this._drawing=true;D=this.get("seriesCollection");C=0;B=D.length;for(;C<B;++C){D[C].draw();if((!D[C].get("xcoords")||!D[C].get("ycoords"))&&!D[C] instanceof b.PieSeries){this._callLater=true;break;}}this._drawing=false;if(this._callLater){this._drawSeries();}},_drawingCompleteHandler:function(D){var C=D.currentTarget,E,B=b.Array.indexOf(this._dispatchers,C);if(B>-1){this._dispatchers.splice(B,1);}if(this._dispatchers.length<1){E=this.get("graphic");if(!E.get("autoDraw")){E._redraw();}this.fire("chartRendered");}},_getDefaultStyles:function(){var B={background:{shape:"rect",fill:{color:"#faf9f2"},border:{color:"#dad8c9",weight:1}}};return B;},destructor:function(){if(this._graphic){this._graphic.destroy();}if(this._background){this._background.get("graphic").destroy();}if(this._gridlines){this._gridlines.get("graphic").destroy();}}},{ATTRS:{x:{setter:function(B){this.get("boundingBox").setStyle("left",B+"px");return B;}},y:{setter:function(B){this.get("boundingBox").setStyle("top",B+"px");return B;}},chart:{},seriesCollection:{getter:function(){return this._seriesCollection;},setter:function(B){this._parseSeriesCollection(B);return this._seriesCollection;}},showBackground:{value:true},seriesDictionary:{readOnly:true,getter:function(){return this._seriesDictionary;}},horizontalGridlines:{value:null,setter:function(C){var B=this.get("horizontalGridlines");if(B&&B instanceof b.Gridlines){B.remove();}if(C instanceof b.Gridlines){B=C;C.set("graph",this);return C;}else{if(C&&C.axis){B=new b.Gridlines({direction:"horizontal",axis:C.axis,graph:this,styles:C.styles});return B;}}}},verticalGridlines:{value:null,setter:function(C){var B=this.get("verticalGridlines");if(B&&B instanceof b.Gridlines){B.remove();}if(C instanceof b.Gridlines){B=C;C.set("graph",this);return C;}else{if(C&&C.axis){B=new b.Gridlines({direction:"vertical",axis:C.axis,graph:this,styles:C.styles});return B;}}}},background:{getter:function(){if(!this._background){this._backgroundGraphic=new b.Graphic({render:this.get("contentBox")});this._backgroundGraphic.get("node").style.zIndex=0;this._background=this._backgroundGraphic.addShape({type:"rect"});}return this._background;}},gridlines:{readOnly:true,getter:function(){if(!this._gridlines){this._gridlinesGraphic=new b.Graphic({render:this.get("contentBox")});this._gridlinesGraphic.get("node").style.zIndex=1;this._gridlines=this._gridlinesGraphic.addShape({type:"path"});}return this._gridlines;}},graphic:{readOnly:true,getter:function(){if(!this._graphic){this._graphic=new b.Graphic({render:this.get("contentBox")});this._graphic.get("node").style.zIndex=2;this._graphic.set("autoDraw",false);}return this._graphic;}},groupMarkers:{value:false}}});function o(){}o.ATTRS={tooltip:{valueFn:"_getTooltip",setter:function(B){return this._updateTooltip(B);}},categoryKey:{value:"category"},categoryType:{value:"category"},interactionType:{value:"marker"},dataProvider:{setter:function(B){return this._setDataValues(B);}},seriesKeys:{},axesCollection:{},graph:{valueFn:"_getGraph"},groupMarkers:{value:false,setter:function(B){if(this.get("graph")){this.get("graph").set("groupMarkers",B);}return B;}}};o.prototype={_itemRendered:function(B){this._itemRenderQueue=this._itemRenderQueue.splice(1+b.Array.indexOf(this._itemRenderQueue,B.currentTarget),1);if(this._itemRenderQueue.length<1){this._redraw();}},_getGraph:function(){var B=new b.Graph({chart:this,groupMarkers:this.get("groupMarkers")});B.after("chartRendered",b.bind(function(C){this.fire("chartRendered");},this));return B;},getSeries:function(D){var B=null,C=this.get("graph");if(C){if(q.isNumber(D)){B=C.getSeriesByIndex(D);}else{B=C.getSeriesByKey(D);}}return B;},getAxisByKey:function(D){var B,C=this.get("axes");if(C&&C.hasOwnProperty(D)){B=C[D];}return B;},getCategoryAxis:function(){var C,B=this.get("categoryKey"),D=this.get("axes");if(D.hasOwnProperty(B)){C=D[B];}return C;},_direction:"horizontal",_dataProvider:null,_setDataValues:function(G){if(q.isArray(G[0])){var F,I=[],D=G[0],E=0,C=D.length,H,B=G.length;for(;E<C;++E){F={category:D[E]};for(H=1;H<B;++H){F["series"+H]=G[H][E];}I[E]=F;}return I;}return G;},_seriesCollection:null,_setSeriesCollection:function(B){this._seriesCollection=B;},_getAxisClass:function(B){return this._axisClass[B];},_axisClass:{stacked:b.StackedAxis,numeric:b.NumericAxis,category:b.CategoryAxis,time:b.TimeAxis},_axes:null,initializer:function(){this._itemRenderQueue=[];this.after("dataProviderChange",this._dataProviderChangeHandler);},renderUI:function(){var B=this.get("tooltip");this.get("boundingBox").setStyle("position","absolute");this.get("contentBox").setStyle("position","absolute");this._addAxes();this._addSeries();if(B&&B.show){this._addTooltip();}this._redraw();},syncUI:function(){this._redraw();},bindUI:function(){this.after("tooltipChange",b.bind(this._tooltipChangeHandler,this));this.after("widthChange",this._sizeChanged);this.after("heightChange",this._sizeChanged);var F=this.get("tooltip"),I="mouseout",E="mouseover",C=this.get("contentBox"),H=this.get("interactionType"),D=0,B,G="."+n;
if(H=="marker"){I=F.hideEvent;E=F.showEvent;b.delegate("mouseenter",b.bind(this._markerEventDispatcher,this),C,G);b.delegate("mousedown",b.bind(this._markerEventDispatcher,this),C,G);b.delegate("mouseup",b.bind(this._markerEventDispatcher,this),C,G);b.delegate("mouseleave",b.bind(this._markerEventDispatcher,this),C,G);b.delegate("click",b.bind(this._markerEventDispatcher,this),C,G);b.delegate("mousemove",b.bind(this._positionTooltip,this),C,G);}else{if(H=="planar"){this._overlay.on("mousemove",b.bind(this._planarEventDispatcher,this));this.on("mouseout",this.hideTooltip);}}if(F){if(I&&E&&I==E){this.on(H+"Event:"+I,this.toggleTooltip);}else{if(E){this.on(H+"Event:"+E,F[H+"EventHandler"]);}if(I){if(q.isArray(I)){B=I.length;for(;D<B;++D){this.on(H+"Event:"+I[D],this.hideTooltip);}}this.on(H+"Event:"+I,this.hideTooltip);}}}},_markerEventDispatcher:function(H){var J=H.type,B=this.get("contentBox"),N=H.currentTarget,M=N.getAttribute("id").split("_"),G=M.pop(),E=M.pop(),F=this.getSeries(parseInt(E,10)),I=this.getSeriesItems(F,G),D=H.pageX,C=H.pageY,L=D-B.getX(),K=C-B.getY();if(J=="mouseenter"){J="mouseover";}else{if(J=="mouseleave"){J="mouseout";}}F.updateMarkerState(J,G);H.halt();this.fire("markerEvent:"+J,{originEvent:H,pageX:D,pageY:C,categoryItem:I.category,valueItem:I.value,node:N,x:L,y:K,series:F,index:G,seriesIndex:E});},_dataProviderChangeHandler:function(F){var C=this.get("dataProvider"),E=this.get("axes"),B,D;if(E){for(B in E){if(E.hasOwnProperty(B)){D=E[B];if(D instanceof b.Axis){if(D.get("position")!="none"){this._addToAxesRenderQueue(D);}D.set("dataProvider",C);}}}}},toggleTooltip:function(C){var B=this.get("tooltip");if(B.visible){this.hideTooltip();}else{B.markerEventHandler.apply(this,[C]);}},_showTooltip:function(E,B,F){var C=this.get("tooltip"),D=C.node;if(E){C.visible=true;C.setTextFunction(D,E);D.setStyle("top",F+"px");D.setStyle("left",B+"px");D.setStyle("visibility","visible");}},_positionTooltip:function(F){var D=this.get("tooltip"),E=D.node,C=this.get("contentBox"),B=(F.pageX+10)-C.getX(),G=(F.pageY+10)-C.getY();if(E){E.setStyle("left",B+"px");E.setStyle("top",G+"px");}},hideTooltip:function(){var B=this.get("tooltip"),C=B.node;B.visible=false;C.set("innerHTML","");C.setStyle("left",-10000);C.setStyle("top",-10000);C.setStyle("visibility","hidden");},_addTooltip:function(){var C=this.get("tooltip"),E=this.get("id")+"_tooltip",B=this.get("contentBox"),D=g.getElementById(E);if(D){B.removeChild(D);}C.node.setAttribute("id",E);C.node.setStyle("visibility","hidden");B.appendChild(C.node);},_updateTooltip:function(G){var D=this._tooltip,B,F,E,C={markerLabelFunction:"markerLabelFunction",planarLabelFunction:"planarLabelFunction",setTextFunction:"setTextFunction",showEvent:"showEvent",hideEvent:"hideEvent",markerEventHandler:"markerEventHandler",planarEventHandler:"planarEventHandler",show:"show"};if(q.isObject(G)){F=G.styles;E=b.one(G.node)||D.node;if(F){for(B in F){if(F.hasOwnProperty(B)){E.setStyle(B,F[B]);}}}for(B in C){if(G.hasOwnProperty(B)){D[B]=G[B];}}D.node=E;}return D;},_getTooltip:function(){var C=g.createElement("div"),B={setTextFunction:this._setText,markerLabelFunction:this._tooltipLabelFunction,planarLabelFunction:this._planarLabelFunction,show:true,hideEvent:"mouseout",showEvent:"mouseover",markerEventHandler:function(E){var D=this.get("tooltip"),F=D.markerLabelFunction.apply(this,[E.categoryItem,E.valueItem,E.index,E.series,E.seriesIndex]);this._showTooltip(F,E.x+10,E.y+10);},planarEventHandler:function(E){var D=this.get("tooltip"),G,F=this.get("categoryAxis");G=D.planarLabelFunction.apply(this,[F,E.valueItem,E.index,E.items,E.seriesIndex]);this._showTooltip(G,E.x+10,E.y+10);}};C.setAttribute("id",this.get("id")+"_tooltip");C=b.one(C);C.setStyle("fontSize","85%");C.setStyle("opacity","0.83");C.setStyle("position","absolute");C.setStyle("paddingTop","2px");C.setStyle("paddingRight","5px");C.setStyle("paddingBottom","4px");C.setStyle("paddingLeft","2px");C.setStyle("backgroundColor","#fff");C.setStyle("border","1px solid #dbdccc");C.setStyle("pointerEvents","none");C.setStyle("zIndex",3);C.setStyle("whiteSpace","noWrap");C.setStyle("visibility","hidden");B.node=b.one(C);this._tooltip=B;return B;},_planarLabelFunction:function(H,L,J,F,D){var B=g.createElement("div"),K,G=0,I=F.length,C,E;if(H){B.appendChild(g.createTextNode(H.get("labelFunction").apply(this,[H.getKeyValueAt(this.get("categoryKey"),J),H.get("labelFormat")])));}for(;G<I;++G){E=F[G];if(E.get("visible")){K=L[G];C=K.axis;B.appendChild(g.createElement("br"));B.appendChild(g.createTextNode(K.displayName+": "+C.get("labelFunction").apply(this,[C.getKeyValueAt(K.key,J),C.get("labelFormat")])));}}return B;},_tooltipLabelFunction:function(G,B,E,D,C){var F=g.createElement("div");F.appendChild(g.createTextNode(G.displayName+": "+G.axis.get("labelFunction").apply(this,[G.value,G.axis.get("labelFormat")])));F.appendChild(g.createElement("br"));F.appendChild(g.createTextNode(B.displayName+": "+B.axis.get("labelFunction").apply(this,[B.value,B.axis.get("labelFormat")])));return F;},_tooltipChangeHandler:function(F){if(this.get("tooltip")){var D=this.get("tooltip"),E=D.node,C=D.show,B=this.get("contentBox");if(E&&C){if(!B.contains(E)){this._addTooltip();}}}},_setText:function(B,C){B.setContent("");if(q.isNumber(C)){C=C+"";}else{if(!C){C="";}}if(l(C)){C=g.createTextNode(C);}B.appendChild(C);}};b.ChartBase=o;b.CartesianChart=b.Base.create("cartesianChart",b.Widget,[b.ChartBase],{renderUI:function(){var D=this.get("tooltip"),B,C=c("overlay");this.get("boundingBox").setStyle("position","absolute");this.get("contentBox").setStyle("position","absolute");this._addAxes();this._addGridlines();this._addSeries();if(D&&D.show){this._addTooltip();}this.get("styles");if(this.get("interactionType")=="planar"){B=g.createElement("div");this.get("contentBox").appendChild(B);this._overlay=b.one(B);this._overlay.setStyle("position","absolute");this._overlay.setStyle("background","#fff");this._overlay.setStyle("opacity",0);this._overlay.addClass(C);
this._overlay.setStyle("zIndex",4);}this._redraw();},_planarEventDispatcher:function(W){var E=this.get("graph"),I=this.get("boundingBox"),Q=E.get("contentBox"),D=W.pageX,B=W.pageY,M=D-I.getX(),L=B-I.getY(),J={x:D-Q.getX(),y:B-Q.getY()},C=E.get("seriesCollection"),N,U=0,K,H=this._selectedIndex,Y,P=[],F=[],O=[],Z=this.get("direction"),aa,X,S,R,G,V,T;if(Z=="horizontal"){X="x";S="y";}else{S="x";X="y";}R=J[X];if(C){V=C.length;while(U<V&&!G){if(C[U]){G=C[U].get(X+"MarkerPlane");}U++;}}if(G){V=G.length;for(U=0;U<V;++U){if(R<=G[U].end&&R>=G[U].start){K=U;break;}}V=C.length;for(U=0;U<V;++U){N=C[U];T=N.get(S+"coords");aa=N.get("markers");if(aa&&!isNaN(H)&&H>-1){N.updateMarkerState("mouseout",H);}if(T&&T[K]>-1){if(aa&&!isNaN(K)&&K>-1){N.updateMarkerState("mouseover",K);}Y=this.getSeriesItems(N,K);F.push(Y.category);O.push(Y.value);P.push(N);}}this._selectedIndex=K;if(K>-1){this.fire("planarEvent:mouseover",{categoryItem:F,valueItem:O,x:M,y:L,pageX:D,pageY:B,items:P,index:K,originEvent:W});}else{this.fire("planarEvent:mouseout");}}},_type:"combo",_itemRenderQueue:null,_addToAxesRenderQueue:function(B){if(!this._itemRenderQueue){this._itemRenderQueue=[];}if(b.Array.indexOf(this._itemRenderQueue,B)<0){this._itemRenderQueue.push(B);}},_addToAxesCollection:function(B,D){var C=this.get(B+"AxesCollection");if(!C){C=[];this.set(B+"AxesCollection",C);}C.push(D);},_getDefaultSeriesCollection:function(){return this._parseSeriesCollection();},_parseSeriesCollection:function(U){var K=this.get("direction"),B=U||[],R,O,M=[],H,G=this.get("seriesKeys").concat(),Q,F,N,E=this.get("type"),S,J,T,C,D=this.get("categoryKey"),P=this.get("showMarkers"),L=this.get("showAreaFill"),I=this.get("showLines");if(K=="vertical"){R="yAxis";J="yKey";O="xAxis";T="xKey";}else{R="xAxis";J="xKey";O="yAxis";T="yKey";}N=B.length;for(Q=0;Q<N;++Q){S=this._getBaseAttribute(B[Q],T);if(S){F=b.Array.indexOf(G,S);if(F>-1){G.splice(F,1);}M.push(S);}}if(G.length>0){M=M.concat(G);}N=M.length;for(Q=0;Q<N;++Q){H=B[Q]||{type:E};if(H instanceof b.CartesianSeries){this._parseSeriesAxes(H);continue;}H[J]=H[J]||D;H[T]=H[T]||G.shift();H[R]=this._getCategoryAxis();H[O]=this._getSeriesAxis(H[T]);H.type=H.type||E;if((H.type=="combo"||H.type=="stackedcombo"||H.type=="combospline"||H.type=="stackedcombospline")){if(L!==null){H.showAreaFill=(H.showAreaFill!==null&&H.showAreaFill!==undefined)?H.showAreaFill:L;}if(P!==null){H.showMarkers=(H.showMarkers!==null&&H.showMarkers!==undefined)?H.showMarkers:P;}if(I!==null){H.showLines=(H.showLines!==null&&H.showLines!==undefined)?H.showLines:I;}}B[Q]=H;}if(U){C=this.get("graph");C.set("seriesCollection",B);B=C.get("seriesCollection");}return B;},_parseSeriesAxes:function(C){var G=this.get("axes"),E=C.get("xAxis"),B=C.get("yAxis"),F=b.Axis,D;if(E&&!(E instanceof F)&&q.isString(E)&&G.hasOwnProperty(E)){D=G[E];if(D instanceof F){C.set("xAxis",D);}}if(B&&!(B instanceof F)&&q.isString(B)&&G.hasOwnProperty(B)){D=G[B];if(D instanceof F){C.set("yAxis",D);}}},_getCategoryAxis:function(){var B,C=this.get("axes"),D=this.get("categoryAxisName")||this.get("categoryKey");B=C[D];return B;},_getSeriesAxis:function(C,G){var F=this.get("axes"),B,E,D;if(F){if(G&&F.hasOwnProperty(G)){D=F[G];}else{for(B in F){if(F.hasOwnProperty(B)){E=F[B].get("keys");if(E&&E.hasOwnProperty(C)){D=F[B];break;}}}}}return D;},_getBaseAttribute:function(C,B){if(C instanceof b.Base){return C.get(B);}if(C.hasOwnProperty(B)){return C[B];}return null;},_setBaseAttribute:function(C,B,D){if(C instanceof b.Base){C.set(B,D);}else{C[B]=D;}},_setAxes:function(C){var G=this._parseAxes(C),K={},E={edgeOffset:"edgeOffset",position:"position",overlapGraph:"overlapGraph",labelFunction:"labelFunction",labelFunctionScope:"labelFunctionScope",labelFormat:"labelFormat",maximum:"maximum",minimum:"minimum",roundingMethod:"roundingMethod",alwaysShowZero:"alwaysShowZero",title:"title",width:"width",height:"height"},F=this.get("dataProvider"),N,H,O,D,I,M,L,B,J;for(H in G){if(G.hasOwnProperty(H)){M=G[H];if(M instanceof b.Axis){D=M;}else{D=null;B={};B.dataProvider=M.dataProvider||F;B.keys=M.keys;if(M.hasOwnProperty("roundingUnit")){B.roundingUnit=M.roundingUnit;}O=M.position;if(M.styles){B.styles=M.styles;}B.position=M.position;for(N in E){if(E.hasOwnProperty(N)&&M.hasOwnProperty(N)){B[N]=M[N];}}if(C){D=this.getAxisByKey(H);}if(D&&D instanceof b.Axis){I=D.get("position");if(O!=I){if(I!="none"){J=this.get(I+"AxesCollection");J.splice(b.Array.indexOf(J,D),1);}if(O!="none"){this._addToAxesCollection(O,D);}}D.setAttrs(B);}else{L=this._getAxisClass(M.type);D=new L(B);D.after("axisRendered",b.bind(this._itemRendered,this));}}if(D){J=this.get(O+"AxesCollection");if(J&&b.Array.indexOf(J,D)>0){D.set("overlapGraph",false);}K[H]=D;}}}return K;},_addAxes:function(){var G=this.get("axes"),C,E,H,B=this.get("width"),D=this.get("height"),F=b.Node.one(this._parentNode);if(!this._axesCollection){this._axesCollection=[];}for(C in G){if(G.hasOwnProperty(C)){E=G[C];if(E instanceof b.Axis){if(!B){this.set("width",F.get("offsetWidth"));B=this.get("width");}if(!D){this.set("height",F.get("offsetHeight"));D=this.get("height");}this._addToAxesRenderQueue(E);H=E.get("position");if(!this.get(H+"AxesCollection")){this.set(H+"AxesCollection",[E]);}else{this.get(H+"AxesCollection").push(E);}this._axesCollection.push(E);if(E.get("keys").hasOwnProperty(this.get("categoryKey"))){this.set("categoryAxis",E);}E.render(this.get("contentBox"));}}}},_addSeries:function(){var B=this.get("graph"),C=this.get("seriesCollection");B.render(this.get("contentBox"));},_addGridlines:function(){var L=this.get("graph"),C=this.get("horizontalGridlines"),D=this.get("verticalGridlines"),K=this.get("direction"),M=this.get("leftAxesCollection"),G=this.get("rightAxesCollection"),I=this.get("bottomAxesCollection"),E=this.get("topAxesCollection"),F,B=this.get("categoryAxis"),J,H;if(this._axesCollection){F=this._axesCollection.concat();F.splice(b.Array.indexOf(F,B),1);}if(C){if(M&&M[0]){J=M[0];}else{if(G&&G[0]){J=G[0];}else{J=K=="horizontal"?B:F[0];}}if(!this._getBaseAttribute(C,"axis")&&J){this._setBaseAttribute(C,"axis",J);
}if(this._getBaseAttribute(C,"axis")){L.set("horizontalGridlines",C);}}if(D){if(I&&I[0]){H=I[0];}else{if(E&&E[0]){H=E[0];}else{H=K=="vertical"?B:F[0];}}if(!this._getBaseAttribute(D,"axis")&&H){this._setBaseAttribute(D,"axis",H);}if(this._getBaseAttribute(D,"axis")){L.set("verticalGridlines",D);}}},_getAllKeys:function(G){var D=0,B=G.length,F,C,E={};for(;D<B;++D){F=G[D];for(C in F){if(F.hasOwnProperty(C)){E[C]=true;}}}return E;},_getDefaultAxes:function(){return this._parseAxes();},_parseAxes:function(T){var L=this.get("categoryKey"),C,R,N,E={},P=[],D=this.get("categoryAxisName")||this.get("categoryKey"),B=this.get("valueAxisName"),F=this.get("seriesKeys")||[],U,S,K,I,O,M,Q=this.get("dataProvider"),V=this.get("direction"),J,G,H=[],W=this.get("stacked")?"stacked":"numeric";if(V=="vertical"){J="bottom";G="left";}else{J="left";G="bottom";}if(T){for(U in T){if(T.hasOwnProperty(U)){C=T[U];N=this._getBaseAttribute(C,"keys");R=this._getBaseAttribute(C,"type");if(R=="time"||R=="category"){D=U;this.set("categoryAxisName",U);if(q.isArray(N)&&N.length>0){L=N[0];this.set("categoryKey",L);}E[U]=C;}else{if(U==D){E[U]=C;}else{E[U]=C;if(U!=B&&N&&q.isArray(N)){I=N.length;for(K=0;K<I;++K){P.push(N[K]);}H.push(E[U]);}if(!(this._getBaseAttribute(E[U],"type"))){this._setBaseAttribute(E[U],"type",W);}if(!(this._getBaseAttribute(E[U],"position"))){this._setBaseAttribute(E[U],"position",this._getDefaultAxisPosition(E[U],H,J));}}}}}}if(F.length<1){M=this._getAllKeys(Q);for(U in M){if(M.hasOwnProperty(U)&&U!=L&&b.Array.indexOf(P,U)==-1){F.push(U);}}}O=b.Array.indexOf(F,L);if(O>-1){F.splice(O,1);}S=P.length;for(U=0;U<S;++U){O=b.Array.indexOf(F,P[U]);if(O>-1){F.splice(O,1);}}if(!E.hasOwnProperty(D)){E[D]={};}if(!(this._getBaseAttribute(E[D],"keys"))){this._setBaseAttribute(E[D],"keys",[L]);}if(!(this._getBaseAttribute(E[D],"position"))){this._setBaseAttribute(E[D],"position",G);}if(!(this._getBaseAttribute(E[D],"type"))){this._setBaseAttribute(E[D],"type",this.get("categoryType"));}if(!E.hasOwnProperty(B)&&F&&F.length>0){E[B]={keys:F};H.push(E[B]);}if(P.length>0){if(F.length>0){F=P.concat(F);}else{F=P;}}if(E.hasOwnProperty(B)){if(!(this._getBaseAttribute(E[B],"position"))){this._setBaseAttribute(E[B],"position",this._getDefaultAxisPosition(E[B],H,J));}if(!(this._getBaseAttribute(E[B],"type"))){this._setBaseAttribute(E[B],"type",W);}if(!(this._getBaseAttribute(E[B],"keys"))){this._setBaseAttribute(E[B],"keys",F);}}this.set("seriesKeys",F);return E;},_getDefaultAxisPosition:function(E,C,B){var F=this.get("direction"),D=b.Array.indexOf(C,E);if(C[D-1]&&C[D-1].position){if(F=="horizontal"){if(C[D-1].position=="left"){B="right";}else{if(C[D-1].position=="right"){B="left";}}}else{if(C[D-1].position=="bottom"){B="top";}else{B="bottom";}}}return B;},getSeriesItems:function(G,F){var H=G.get("xAxis"),D=G.get("yAxis"),E=G.get("xKey"),C=G.get("yKey"),I,B;if(this.get("direction")=="vertical"){I={axis:D,key:C,value:D.getKeyValueAt(C,F)};B={axis:H,key:E,value:H.getKeyValueAt(E,F)};}else{B={axis:D,key:C,value:D.getKeyValueAt(C,F)};I={axis:H,key:E,value:H.getKeyValueAt(E,F)};}I.displayName=G.get("categoryDisplayName");B.displayName=G.get("valueDisplayName");I.value=I.axis.getKeyValueAt(I.key,F);B.value=B.axis.getKeyValueAt(B.key,F);return{category:I,value:B};},_sizeChanged:function(E){if(this._axesCollection){var D=this._axesCollection,C=0,B=D.length;for(;C<B;++C){this._addToAxesRenderQueue(D[C]);}this._redraw();}},_getTopOverflow:function(G,E,C){var D=0,B,H=0,F;if(G){B=G.length;for(;D<B;++D){F=G[D];H=Math.max(H,Math.abs(F.getMaxLabelBounds().top)-(F.getEdgeOffset(F.get("styles").majorTicks.count,C)*0.5));}}if(E){D=0;B=E.length;for(;D<B;++D){F=E[D];H=Math.max(H,Math.abs(F.getMaxLabelBounds().top)-(F.getEdgeOffset(F.get("styles").majorTicks.count,C)*0.5));}}return H;},_getRightOverflow:function(G,D,F){var C=0,B,H=0,E;if(G){B=G.length;for(;C<B;++C){E=G[C];H=Math.max(H,E.getMaxLabelBounds().right-(E.getEdgeOffset(E.get("styles").majorTicks.count,F)*0.5));}}if(D){C=0;B=D.length;for(;C<B;++C){E=D[C];H=Math.max(H,E.getMaxLabelBounds().right-(E.getEdgeOffset(E.get("styles").majorTicks.count,F)*0.5));}}return H;},_getLeftOverflow:function(G,D,F){var C=0,B,H=0,E;if(G){B=G.length;for(;C<B;++C){E=G[C];H=Math.max(H,Math.abs(E.getMinLabelBounds().left)-(E.getEdgeOffset(E.get("styles").majorTicks.count,F)*0.5));}}if(D){C=0;B=D.length;for(;C<B;++C){E=D[C];H=Math.max(H,Math.abs(E.getMinLabelBounds().left)-(E.getEdgeOffset(E.get("styles").majorTicks.count,F)*0.5));}}return H;},_getBottomOverflow:function(G,E,C){var D=0,B,H=0,F;if(G){B=G.length;for(;D<B;++D){F=G[D];H=Math.max(H,F.getMinLabelBounds().bottom-(F.getEdgeOffset(F.get("styles").majorTicks.count,C)*0.5));}}if(E){D=0;B=E.length;for(;D<B;++D){F=E[D];H=Math.max(H,F.getMinLabelBounds().bottom-(F.getEdgeOffset(F.get("styles").majorTicks.count,C)*0.5));}}return H;},_redraw:function(){if(this._drawing){this._callLater=true;return;}this._drawing=true;this._callLater=false;var O=this.get("width"),Y=this.get("height"),W=0,G=0,ac=0,C=0,B=this.get("leftAxesCollection"),M=this.get("rightAxesCollection"),N=this.get("topAxesCollection"),ab=this.get("bottomAxesCollection"),X=0,U,H,E="visible",F=this.get("graph"),J,P,V,T,K,L,aa,Z,S=this.get("allowContentOverflow"),Q,D,ae,R,I,ad={};if(B){ae=[];U=B.length;for(X=U-1;X>-1;--X){ae.unshift(W);W+=B[X].get("width");}}if(M){D=[];U=M.length;X=0;for(X=U-1;X>-1;--X){G+=M[X].get("width");D.unshift(O-G);}}if(N){R=[];U=N.length;for(X=U-1;X>-1;--X){R.unshift(ac);ac+=N[X].get("height");}}if(ab){I=[];U=ab.length;for(X=U-1;X>-1;--X){C+=ab[X].get("height");I.unshift(Y-C);}}K=O-(W+G);L=Y-(C+ac);ad.left=W;ad.top=ac;ad.bottom=Y-C;ad.right=O-G;if(!S){J=this._getTopOverflow(B,M);P=this._getBottomOverflow(B,M);V=this._getLeftOverflow(ab,N);T=this._getRightOverflow(ab,N);Q=J-ac;if(Q>0){ad.top=J;if(R){X=0;U=R.length;for(;X<U;++X){R[X]+=Q;}}}Q=P-C;if(Q>0){ad.bottom=Y-P;if(I){X=0;U=I.length;for(;X<U;++X){I[X]-=Q;}}}Q=V-W;if(Q>0){ad.left=V;if(ae){X=0;U=ae.length;for(;X<U;++X){ae[X]+=Q;}}}Q=T-G;
if(Q>0){ad.right=O-T;if(D){X=0;U=D.length;for(;X<U;++X){D[X]-=Q;}}}}K=ad.right-ad.left;L=ad.bottom-ad.top;aa=ad.left;Z=ad.top;if(N){U=N.length;X=0;for(;X<U;X++){H=N[X];if(H.get("width")!==K){H.set("width",K);}H.get("boundingBox").setStyle("left",aa+"px");H.get("boundingBox").setStyle("top",R[X]+"px");}if(H._hasDataOverflow()){E="hidden";}}if(ab){U=ab.length;X=0;for(;X<U;X++){H=ab[X];if(H.get("width")!==K){H.set("width",K);}H.get("boundingBox").setStyle("left",aa+"px");H.get("boundingBox").setStyle("top",I[X]+"px");}if(H._hasDataOverflow()){E="hidden";}}if(B){U=B.length;X=0;for(;X<U;++X){H=B[X];H.get("boundingBox").setStyle("top",Z+"px");H.get("boundingBox").setStyle("left",ae[X]+"px");if(H.get("height")!==L){H.set("height",L);}}if(H._hasDataOverflow()){E="hidden";}}if(M){U=M.length;X=0;for(;X<U;++X){H=M[X];H.get("boundingBox").setStyle("top",Z+"px");H.get("boundingBox").setStyle("left",D[X]+"px");if(H.get("height")!==L){H.set("height",L);}}if(H._hasDataOverflow()){E="hidden";}}this._drawing=false;if(this._callLater){this._redraw();return;}if(F){F.get("boundingBox").setStyle("left",aa+"px");F.get("boundingBox").setStyle("top",Z+"px");F.set("width",K);F.set("height",L);F.get("boundingBox").setStyle("overflow",E);}if(this._overlay){this._overlay.setStyle("left",aa+"px");this._overlay.setStyle("top",Z+"px");this._overlay.setStyle("width",K+"px");this._overlay.setStyle("height",L+"px");}},destructor:function(){var F=this.get("graph"),D=0,B,G=this.get("seriesCollection"),C=this._axesCollection,E=this.get("tooltip").node;B=G?G.length:0;for(;D<B;++D){if(G[D] instanceof b.CartesianSeries){G[D].destroy(true);}}B=C?C.length:0;for(D=0;D<B;++D){if(C[D] instanceof b.Axis){C[D].destroy(true);}}if(F){F.destroy(true);}if(E){E.remove(true);}if(this._overlay){this._overlay.remove(true);}}},{ATTRS:{allowContentOverflow:{value:false},axesStyles:{getter:function(){var D=this.get("axes"),B,C=this._axesStyles;if(D){for(B in D){if(D.hasOwnProperty(B)&&D[B] instanceof b.Axis){if(!C){C={};}C[B]=D[B].get("styles");}}}return C;},setter:function(D){var C=this.get("axes"),B;for(B in D){if(D.hasOwnProperty(B)&&C.hasOwnProperty(B)){this._setBaseAttribute(C[B],"styles",D[B]);}}}},seriesStyles:{getter:function(){var C=this._seriesStyles,D=this.get("graph"),E,B;if(D){E=D.get("seriesDictionary");if(E){C={};for(B in E){if(E.hasOwnProperty(B)){C[B]=E[B].get("styles");}}}}return C;},setter:function(E){var C,B,D;if(q.isArray(E)){D=this.get("seriesCollection");C=0;B=E.length;for(;C<B;++C){this._setBaseAttribute(D[C],"styles",E[C]);}}else{for(C in E){if(E.hasOwnProperty(C)){D=this.getSeries(C);this._setBaseAttribute(D,"styles",E[C]);}}}}},graphStyles:{getter:function(){var B=this.get("graph");if(B){return(B.get("styles"));}return this._graphStyles;},setter:function(C){var B=this.get("graph");this._setBaseAttribute(B,"styles",C);}},styles:{getter:function(){var B={axes:this.get("axesStyles"),series:this.get("seriesStyles"),graph:this.get("graphStyles")};return B;},setter:function(B){if(B.hasOwnProperty("axes")){if(this.get("axesStyles")){this.set("axesStyles",B.axes);}else{this._axesStyles=B.axes;}}if(B.hasOwnProperty("series")){if(this.get("seriesStyles")){this.set("seriesStyles",B.series);}else{this._seriesStyles=B.series;}}if(B.hasOwnProperty("graph")){this.set("graphStyles",B.graph);}}},axes:{valueFn:"_getDefaultAxes",setter:function(B){return this._setAxes(B);}},seriesCollection:{valueFn:"_getDefaultSeriesCollection",setter:function(B){return this._parseSeriesCollection(B);}},leftAxesCollection:{},bottomAxesCollection:{},rightAxesCollection:{},topAxesCollection:{},stacked:{value:false},direction:{getter:function(){var B=this.get("type");if(B=="bar"){return"vertical";}else{if(B=="column"){return"horizontal";}}return this._direction;},setter:function(B){this._direction=B;return this._direction;}},showAreaFill:{},showMarkers:{},showLines:{},categoryAxisName:{},valueAxisName:{value:"values"},horizontalGridlines:{getter:function(){var B=this.get("graph");if(B){return B.get("horizontalGridlines");}return this._horizontalGridlines;},setter:function(C){var B=this.get("graph");if(C&&!q.isObject(C)){C={};}if(B){B.set("horizontalGridlines",C);}else{this._horizontalGridlines=C;}}},verticalGridlines:{getter:function(){var B=this.get("graph");if(B){return B.get("verticalGridlines");}return this._verticalGridlines;},setter:function(C){var B=this.get("graph");if(C&&!q.isObject(C)){C={};}if(B){B.set("verticalGridlines",C);}else{this._verticalGridlines=C;}}},type:{getter:function(){if(this.get("stacked")){return"stacked"+this._type;}return this._type;},setter:function(B){if(this._type=="bar"){if(B!="bar"){this.set("direction","horizontal");}}else{if(B=="bar"){this.set("direction","vertical");}}this._type=B;return this._type;}},categoryAxis:{}}});b.PieChart=b.Base.create("pieChart",b.Widget,[b.ChartBase],{_getSeriesCollection:function(){if(this._seriesCollection){return this._seriesCollection;}var G=this.get("axes"),I=[],H,E=0,D,J=this.get("type"),L,B="categoryAxis",F="categoryKey",C="valueAxis",K="valueKey";if(G){H=G.values.get("keyCollection");L=G.category.get("keyCollection")[0];D=H.length;for(;E<D;++E){I[E]={type:J};I[E][B]="category";I[E][C]="values";I[E][F]=L;I[E][K]=H[E];}}this._seriesCollection=I;return I;},_parseAxes:function(E){if(!this._axes){this._axes={};}var F,K,D,I,B,H,J=this.get("type"),L=this.get("width"),G=this.get("height"),C=b.Node.one(this._parentNode);if(!L){this.set("width",C.get("offsetWidth"));L=this.get("width");}if(!G){this.set("height",C.get("offsetHeight"));G=this.get("height");}for(F in E){if(E.hasOwnProperty(F)){I=E[F];K=J=="pie"?"none":I.position;H=this._getAxisClass(I.type);B={dataProvider:this.get("dataProvider")};if(I.hasOwnProperty("roundingUnit")){B.roundingUnit=I.roundingUnit;}B.keys=I.keys;B.width=L;B.height=G;B.position=K;B.styles=I.styles;D=new H(B);D.on("axisRendered",b.bind(this._itemRendered,this));this._axes[F]=D;}}},_addAxes:function(){var E=this.get("axes"),B,C,D;if(!E){this.set("axes",this._getDefaultAxes());
E=this.get("axes");}if(!this._axesCollection){this._axesCollection=[];}for(B in E){if(E.hasOwnProperty(B)){C=E[B];D=C.get("position");if(!this.get(D+"AxesCollection")){this.set(D+"AxesCollection",[C]);}else{this.get(D+"AxesCollection").push(C);}this._axesCollection.push(C);}}},_addSeries:function(){var B=this.get("graph"),C=this.get("seriesCollection");this._parseSeriesAxes(C);B.set("showBackground",false);B.set("width",this.get("width"));B.set("height",this.get("height"));B.set("seriesCollection",C);this._seriesCollection=B.get("seriesCollection");B.render(this.get("contentBox"));},_parseSeriesAxes:function(G){var C=0,B=G.length,E,F=this.get("axes"),D;for(;C<B;++C){E=G[C];if(E){if(E instanceof b.PieSeries){D=E.get("categoryAxis");if(D&&!(D instanceof b.Axis)){E.set("categoryAxis",F[D]);}D=E.get("valueAxis");if(D&&!(D instanceof b.Axis)){E.set("valueAxis",F[D]);}continue;}E.categoryAxis=F.category;E.valueAxis=F.values;if(!E.type){E.type=this.get("type");}}}},_getDefaultAxes:function(){var F=this.get("categoryKey"),C=this.get("seriesKeys")||[],B="numeric",E,D=this.get("dataProvider")[0];if(C.length<1){for(E in D){if(E!=F){C.push(E);}}if(C.length>0){this.set("seriesKeys",C);}}return{values:{keys:C,type:B},category:{keys:[F],type:this.get("categoryType")}};},getSeriesItems:function(D,C){var E={axis:D.get("categoryAxis"),key:D.get("categoryKey"),displayName:D.get("categoryDisplayName")},B={axis:D.get("valueAxis"),key:D.get("valueKey"),displayName:D.get("valueDisplayName")};E.value=E.axis.getKeyValueAt(E.key,C);B.value=B.axis.getKeyValueAt(B.key,C);return{category:E,value:B};},_sizeChanged:function(B){this._redraw();},_redraw:function(){var D=this.get("graph"),B=this.get("width"),C=this.get("height"),E;if(D){E=Math.min(B,C);D.set("width",E);D.set("height",E);}},_tooltipLabelFunction:function(I,B,E,D,C){var H=g.createElement("div"),F=D.getTotalValues(),G=Math.round((B.value/F)*10000)/100;H.appendChild(g.createTextNode(I.displayName+": "+I.axis.get("labelFunction").apply(this,[I.value,I.axis.get("labelFormat")])));H.appendChild(g.createElement("br"));H.appendChild(g.createTextNode(B.displayName+": "+B.axis.get("labelFunction").apply(this,[B.value,B.axis.get("labelFormat")])));H.appendChild(g.createElement("br"));H.appendChild(g.createTextNode(G+"%"));return H;}},{ATTRS:{axes:{getter:function(){return this._axes;},setter:function(B){this._parseAxes(B);}},seriesCollection:{getter:function(){return this._getSeriesCollection();},setter:function(B){return this._setSeriesCollection(B);}},type:{value:"pie"}}});},"@VERSION@",{requires:["dom","datatype-number","datatype-date","event-custom","event-mouseenter","widget","widget-position","widget-stack","graphics"]});
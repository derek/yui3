YUI.add("model-observable",function(e,t){function c(){n.apply(this,arguments)}var n=e.BaseObservable,r=e.Lang,i=e.Model.Base,s=i.prototype,o=e.Object,u="change",a="error",f="load",l="save";c.prototype={addAttr:s.addAttr,set:s.set,setAttrs:s.setAttrs,destroy:function(e,t){return this.onceAfter("destroy",function(){this._destroy(e,t)}),n.prototype.destroy.apply(this,arguments)},parse:function(t){if(typeof t=="string")try{return e.JSON.parse(t)}catch(n){return this.fire(a,{error:n,response:t,src:"parse"}),null}return t},_defAttrChangeFn:function(e){var t=e.attrName;this._setAttrVal(t,e.subAttrName,e.prevVal,e.newVal)?(e.newVal=this.get(t),e._transaction&&(e._transaction[t]=e)):e.stopImmediatePropagation()},_handleRead:function(e,t,n,r){var i,s;i={options:n,response:t},e?(i.error=e,i.src="load",this.fire(a,i)):(this._loadEvent||(this._loadEvent=this.publish(f,{preventable:!1})),s=i.parsed=this._parse(t),this.setAttrs(s,n),this.changed={},this.fire(f,i)),r&&r(e,t)},_handleSave:function(e,t,n,r){var i,s;i={options:n,response:t},e?(i.error=e,i.src="save",this.fire(a,i)):(this._saveEvent||(this._saveEvent=this.publish(l,{preventable:!1})),t&&(s=i.parsed=this._parse(t),this.setAttrs(s,n)),this.changed={},this.fire(l,i)),r&&r(e,t)},_processAttrsTransaction:function(t,n){if(o.isEmpty(t))return;i.prototype._processAttrsTransaction.apply(this,arguments),n.silent||(this._changeEvent||(this._changeEvent=this.publish(u,{preventable:!1})),this.fire(u,e.merge(n,{changed:this.lastChange})))},_validate:function(e,t){var n=this;this.validate(e,function(i){if(r.isValue(i)){n.fire(a,{attributes:e,error:i,src:"validate"}),t(i);return}t()})}},c._ATTR_CFG=n._ATTR_CFG.concat(),e.mix(c,n,!1,null,1),e.Model.Observable=c},"@VERSION@",{requires:["base-observable","model-base"]});

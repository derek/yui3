YUI.add("scrollview-scrollbars",function(e,t){function M(){M.superclass.constructor.apply(this,arguments)}var n=e.ClassNameManager.getClassName,r,i=e.Transition,s=i.useNative,o=e.Transition._VENDOR_PREFIX,u="scrollbar",a="scrollview",f="verticalNode",l="horizontalNode",c="childCache",h="top",p="left",d="width",v="height",m="scrollWidth",g="scrollHeight",y="_sbh",b="_sbv",w=o?o+"TransitionProperty":"transitionProperty",E="transform",S="translateX(",x="translateY(",T="scaleX(",N="scaleY(",C="scrollX",k="scrollY",L="px",A=")",O=L+A;M.CLASS_NAMES={showing:n(a,u,"showing"),scrollbar:n(a,u),scrollbarV:n(a,u,"vert"),scrollbarH:n(a,u,"horiz"),scrollbarVB:n(a,u,"vert","basic"),scrollbarHB:n(a,u,"horiz","basic"),child:n(a,"child"),first:n(a,"first"),middle:n(a,"middle"),last:n(a,"last")},r=M.CLASS_NAMES,M.NAME="pluginScrollViewScrollbars",M.NS="scrollbars",M.SCROLLBAR_TEMPLATE=["<div>",'<span class="'+r.child+" "+r.first+'"></span>','<span class="'+r.child+" "+r.middle+'"></span>','<span class="'+r.child+" "+r.last+'"></span>',"</div>"].join(""),M.ATTRS={verticalNode:{setter:"_setNode",valueFn:"_defaultNode"},horizontalNode:{setter:"_setNode",valueFn:"_defaultNode"}},e.namespace("Plugin").ScrollViewScrollbars=e.extend(M,e.Plugin.Base,{initializer:function(){this._host=this.get("host"),this.afterHostEvent("scrollEnd",this._hostScrollEnd),this.afterHostMethod("scrollTo",this._update),this.afterHostMethod("_uiDimensionsChange",this._hostDimensionsChange)},_hostDimensionsChange:function(){var t=this._host,n=t._cAxis;this._dims=t._getScrollDims(),n&&n.y&&this._renderBar(this.get(f),!0,"vert"),n&&n.x&&this._renderBar(this.get(l),!0,"horiz"),this._update(),e.later(500,this,"flash",!0)},_hostScrollEnd:function(e){this._host._flicking||this.flash()},_renderBar:function(e,t){var n=e.inDoc(),i=this._host._bb,s=e.getData("isHoriz")?r.scrollbarHB:r.scrollbarVB;t&&!n?(i.append(e),e.toggleClass(s,this._basic),this._setChildCache(e)):!t&&n&&(e.remove(),this._clearChildCache(e))},_setChildCache:function(e){var t=e.get("children"),n=t.item(0),r=t.item(1),i=t.item(2),s=e.getData("isHoriz")?"offsetWidth":"offsetHeight";e.setStyle(w,E),r.setStyle(w,E),i.setStyle(w,E),e.setData(c,{fc:n,lc:i,mc:r,fcSize:n&&n.get(s),lcSize:i&&i.get(s)})},_clearChildCache:function(e){e.clearData(c)},_updateBar:function(e,t,n,r){var i=this._host,o=this._basic,u=i._cb,a=0,f=1,l=e.getData(c),m=l.lc,g=l.mc,w=l.fcSize,M=l.lcSize,_,D,P,H,B,j,F,I,q,R;r?(j=d,F=p,I=y,q=this._dims.offsetWidth,R=this._dims.scrollWidth,H=S,B=T,t=t!==undefined?t:i.get(C)):(j=v,F=h,I=b,q=this._dims.offsetHeight,R=this._dims.scrollHeight,H=x,B=N,t=t!==undefined?t:i.get(k)),a=Math.floor(q*(q/R)),f=Math.floor(t/(R-q)*(q-a)),a>q&&(a=1),f>q-a?a-=f-(q-a):f<0&&(a=f+a,f=0),_=a-(w+M),_<0&&(_=0),_===0&&f!==0&&(f=q-(w+M)-1),n!==0?(P={duration:n},s?P.transform=H+f+O:P[F]=f+L,e.transition(P)):s?e.setStyle(E,H+f+O):e.setStyle(F,f+L);if(this[I]!==_){this[I]=_;if(_>0){n!==0?(P={duration:n},s?P.transform=B+_+A:P[j]=_+L,g.transition(P)):s?g.setStyle(E,B+_+A):g.setStyle(j,_+L);if(!r||!o)D=a-M,n!==0?(P={duration:n},s?P.transform=H+D+O:P[F]=D,m.transition(P)):s?m.setStyle(E,H+D+O):m.setStyle(F,D+L)}}},_update:function(e,t,n,r){var i=this.get(f),s=this.get(l),o=this._host,u=o._cAxis;n=(n||0)/1e3,this._showing||this.show(),u&&u.y&&i&&this._updateBar(i,t,n,!1),u&&u.x&&s&&this._updateBar(s,e,n,!0)},show:function(e){this._show(!0,e)},hide:function(e){this._show(!1,e)},_show:function(e,t){var n=this.get(f),r=this.get(l),i=t?.6:0,s=e?1:0,o;this._showing=e,this._flashTimer&&this._flashTimer.cancel(),o={duration:i,opacity:s},n&&n.transition(o),r&&r.transition(o)},flash:function(){var t=this._host;this.show(!0),this._flashTimer=e.later(800,this,"hide",!0)},_setNode:function(t,n){var i=n===l;return t=e.one(t),t&&(t.addClass(r.scrollbar),t.addClass(i?r.scrollbarH:r.scrollbarV),t.setData("isHoriz",i)),t},_defaultNode:function(){return e.Node.create(M.SCROLLBAR_TEMPLATE)},_basic:e.UA.ie&&e.UA.ie<=8})},"@VERSION@",{requires:["classnamemanager","transition","plugin"],skinnable:!0});

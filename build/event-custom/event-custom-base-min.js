YUI.add("event-custom-base",function(c){c.Env.evt={handles:{},plugins:{}};var p=0,d=1,n={objs:{},before:function(C,E,F,G){var D=C,B;if(G){B=[C,G].concat(c.Array(arguments,4,true));D=c.rbind.apply(c,B);}return this._inject(p,D,E,F);},after:function(C,E,F,G){var D=C,B;if(G){B=[C,G].concat(c.Array(arguments,4,true));D=c.rbind.apply(c,B);}return this._inject(d,D,E,F);},_inject:function(B,D,E,G){var H=c.stamp(E),F,C;if(!this.objs[H]){this.objs[H]={};}F=this.objs[H];if(!F[G]){F[G]=new c.Do.Method(E,G);E[G]=function(){return F[G].exec.apply(F[G],arguments);};}C=H+c.stamp(D)+G;F[G].register(C,D,B);return new c.EventHandle(F[G],C);},detach:function(B){if(B.detach){B.detach();}},_unload:function(C,B){}};c.Do=n;n.Method=function(B,C){this.obj=B;this.methodName=C;this.method=B[C];this.before={};this.after={};};n.Method.prototype.register=function(C,D,B){if(B){this.after[C]=D;}else{this.before[C]=D;}};n.Method.prototype._delete=function(B){delete this.before[B];delete this.after[B];};n.Method.prototype.exec=function(){var D=c.Array(arguments,0,true),E,C,H,F=this.before,B=this.after,G=false;for(E in F){if(F.hasOwnProperty(E)){C=F[E].apply(this.obj,D);if(C){switch(C.constructor){case n.Halt:return C.retVal;case n.AlterArgs:D=C.newArgs;break;case n.Prevent:G=true;break;default:}}}}if(!G){C=this.method.apply(this.obj,D);}n.originalRetVal=C;n.currentRetVal=C;for(E in B){if(B.hasOwnProperty(E)){H=B[E].apply(this.obj,D);if(H&&H.constructor==n.Halt){return H.retVal;}else{if(H&&H.constructor==n.AlterReturn){C=H.newRetVal;n.currentRetVal=C;}}}}return C;};n.AlterArgs=function(C,B){this.msg=C;this.newArgs=B;};n.AlterReturn=function(C,B){this.msg=C;this.newRetVal=B;};n.Halt=function(C,B){this.msg=C;this.retVal=B;};n.Prevent=function(B){this.msg=B;};n.Error=n.Halt;var x="after",b=["broadcast","monitored","bubbles","context","contextFn","currentTarget","defaultFn","defaultTargetOnly","details","emitFacade","fireOnce","async","host","preventable","preventedFn","queuable","silent","stoppedFn","target","type"],k=9,e="yui:log",w=c.Array,f=c.Lang,s;function g(B,C){this.evt=B;this.sub=C;}g.prototype={batch:function(B,C){B.call(C||this,this);if(f.isArray(this.evt)){c.Array.each(this.evt,function(D){D.batch.call(C||D,B);});}},detach:function(){var B=this.evt,D=0,C;if(B){if(f.isArray(B)){for(C=0;C<B.length;C++){D+=B[C].detach();}}else{B._delete(this.sub);D=1;}}return D;},monitor:function(B){return this.evt.monitor.apply(this.evt,arguments);}};c.EventHandle=g;function q(C,D){var B=this;D=D||{};B.id=c.stamp(B);B.type=C;B.context=c;B.logSystem=(C==e);B.silent=B.logSystem;B.subscribers={};B.afters={};B.preventable=true;B.bubbles=true;B.signature=k;B.subCount=0;B.afterCount=0;B.applyConfig(D,true);}s={hasSubs:function(B){var E=this.subCount,C=this.afterCount,D=this.sibling;if(D){E+=D.subCount;C+=D.afterCount;}if(B){return(B=="after")?C:E;}return(E+C);},monitor:function(E){var B=this,D=B.id+"|"+B.type+"_"+E,C=w(arguments,0,true);B.monitored=true;C[0]=D;return B.host.on.apply(B.host,C);},getSubs:function(){var D=c.merge(this.subscribers),B=c.merge(this.afters),C=this.sibling;if(C){c.mix(D,C.subscribers);c.mix(B,C.afters);}return[D,B];},applyConfig:function(C,B){if(C){c.mix(this,C,B,b);}},_on:function(G,E,D,B){var C=this,F=new c.Subscriber(G,E,D,B);if(C.fireOnce&&C.fired){if(C.async){setTimeout(c.bind(C._notify,C,F,C.firedWith),0);}else{C._notify(F,C.firedWith);}}if(B==x){C.afters[F.id]=F;C.afterCount++;}else{C.subscribers[F.id]=F;C.subCount++;}return new c.EventHandle(C,F);},on:function(D,C){var B=(arguments.length>2)?w(arguments,2,true):null;if(this.host){this.host._monitor("attach",this.type,{args:arguments});}return this._on(D,C,B,true);},after:function(D,C){var B=(arguments.length>2)?w(arguments,2,true):null;return this._on(D,C,B,x);},detach:function(F,D){if(F&&F.detach){return F.detach();}var C,E,G=0,B=c.merge(this.subscribers,this.afters);for(C in B){if(B.hasOwnProperty(C)){E=B[C];if(E&&(!F||F===E.fn)){this._delete(E);G++;}}}return G;},_notify:function(F,E,B){var C=this,D;D=F.notify(E,C);if(false===D||C.stopped>1){return false;}return true;},fire:function(){var B=this,D=(B.emitFacade)?"fireComplex":"fireSimple",C=w(arguments,0,true);if(B.fireOnce){B.fired=true;B.firedWith=C;B.fire=B._fireImmediate;}return B[D](C);},_fireImmediate:function(){return true;},fireSimple:function(C){var B=this,D;B.stopped=0;B.prevented=0;if(B.hasSubs()){D=B.getSubs();B._procSubs(D[0],C);B._procSubs(D[1],C);}B.broadcast&&!B.stopped&&B._broadcast(C);return B.stopped?false:true;},fireComplex:function(B){B[0]=B[0]||{};return this.fireSimple(B);},_procSubs:function(E,C,B){var F,D;for(D in E){if(E.hasOwnProperty(D)){F=E[D];if(F&&F.fn){if(false===this._notify(F,C,B)){this.stopped=2;}if(this.stopped==2){return false;}}}}return true;},_broadcast:function(C){var B=C.slice();B.unshift(this.type);if(this.host!==c){c.fire.apply(c,B);}if(this.broadcast==2){c.Global.fire.apply(c.Global,B);}},detachAll:function(){return this.detach();},_delete:function(C){var B=this;if(C){if(B.subscribers[C.id]){delete B.subscribers[C.id];B.subCount--;}if(B.afters[C.id]){delete B.afters[C.id];B.afterCount--;}}if(B.host){B.host._monitor("detach",B.type,{ce:B,sub:C});}if(C){C.deleted=true;}}};s.unsubscribe=s.detach;s.unsubscribeAll=s.detachAll;q.prototype=s;c.CustomEvent=q;function z(E,D,C){var B=this;B.fn=E;B.context=D;B.id=c.stamp(B);B.args=C;}z.prototype={_notify:function(G,D,E){if(this.deleted&&!this.postponed){delete this.postponed;return null;}var B=this.args,F=this.fn,C;switch(E.signature){case 0:C=F.call(G,E.type,D,G);break;case 1:C=F.call(G,D[0]||null,G);break;default:if(B||D){D=D||[];B=(B)?D.concat(B):D;C=F.apply(G,B);}else{C=F.call(G);}}if(this.once){E._delete(this);}return C;},notify:function(C,E){var F=this.context,B=true;if(!F){F=(E.contextFn)?E.contextFn():E.context;}if(c.config.throwFail){B=this._notify(F,C,E);}else{try{B=this._notify(F,C,E);}catch(D){c.error(this+" failed: "+D.message,D);}}return B;},contains:function(C,B){if(B){return((this.fn==C)&&this.context==B);
}else{return(this.fn==C);}}};c.Subscriber=z;var i=c.Lang,A=":",y="|",h="~AFTER~",j=c.Array,o=i.isString,m=i.isArray,l=i.isObject,a=i.isFunction,v=c.cached(function(B){return B.replace(/(.*)(:)(.*)/,"*$2$3");}),r=c.cached(function(B,C){if(!C||!o(B)||B.indexOf(A)>-1){return B;}return C+A+B;}),t=c.cached(function(D,F){var C=D,E,G,B;if(!o(C)){return C;}B=C.indexOf(h);if(B>-1){G=true;C=C.substr(h.length);}B=C.indexOf(y);if(B>-1){E=C.substr(0,(B));C=C.substr(B+1);if(C=="*"){C=null;}}return[E,(F)?r(C,F):C,G,C];}),u=function(B){var C=(l(B))?B:{};this._yuievt=this._yuievt||{id:c.guid(),events:{},targets:{},config:C,chain:("chain" in C)?C.chain:c.config.chain,bubbling:false,defaults:{context:C.context||this,host:this,emitFacade:C.emitFacade,fireOnce:C.fireOnce,queuable:C.queuable,monitored:C.monitored,broadcast:C.broadcast,defaultTargetOnly:C.defaultTargetOnly,bubbles:("bubbles" in C)?C.bubbles:true}};};u.prototype={once:function(){var B=this.on.apply(this,arguments);B.batch(function(C){if(C.sub){C.sub.once=true;}});return B;},onceAfter:function(){var B=this.after.apply(this,arguments);B.batch(function(C){if(C.sub){C.sub.once=true;}});return B;},parseType:function(B,C){return t(B,C||this._yuievt.config.prefix);},on:function(F,K,D){var N=t(F,this._yuievt.config.prefix),H=c.Env.evt.handles,S=c.Node,P,Q,C,T,M,L,R,E,B,I,O,J,G;this._monitor("attach",N[1],{args:arguments,category:N[0],after:N[2]});if(l(F)){if(a(F)){return c.Do.before.apply(c.Do,arguments);}P=K;Q=D;C=j(arguments,0,true);T=[];G=m(F);E=(F._after&&(delete F._after))?h:"";c.each(F,function(V,U){if(l(V)){P=V.fn||((a(V))?V:P);Q=V.context||Q;}C[0]=E+((G)?V:U);C[1]=P;C[2]=Q;T.push(this.on.apply(this,C));},this);return(this._yuievt.chain)?this:new c.EventHandle(T);}L=N[0];E=N[2];I=N[3];if(S&&c.instanceOf(this,S)&&(I in S.DOM_EVENTS)){C=j(arguments,0,true);C.splice(2,0,S.getDOMNode(this));return c.on.apply(c,C);}F=N[1];if(c.instanceOf(this,YUI)){B=c.Env.evt.plugins[F];C=j(arguments,0,true);C[0]=I;if(S){O=C[2];if(c.instanceOf(O,c.NodeList)){O=c.NodeList.getDOMNodes(O);}else{if(c.instanceOf(O,S)){O=S.getDOMNode(O);}}J=(I in S.DOM_EVENTS);if(J){C[2]=O;}}if(B){R=B.on.apply(c,C);}else{if((!F)||J){R=c.Event._attach(C);}}}if(!R){M=this._yuievt.events[F]||this.publish(F);R=M._on(K,D,(arguments.length>3)?j(arguments,3,true):null,(E)?"after":true);}if(L){H[L]=H[L]||{};H[L][F]=H[L][F]||[];H[L][F].push(R);}return(this._yuievt.chain)?this:R;},subscribe:function(){return this.on.apply(this,arguments);},detach:function(K,M,B){var Q=this._yuievt.events,F,H=c.Node,O=H&&(c.instanceOf(this,H));if(!K&&(this!==c)){for(F in Q){if(Q.hasOwnProperty(F)){Q[F].detach(M,B);}}if(O){c.Event.purgeElement(H.getDOMNode(this));}return this;}var E=t(K,this._yuievt.config.prefix),J=m(E)?E[0]:null,R=(E)?E[3]:null,G,N=c.Env.evt.handles,P,L,I,D,C=function(W,U,V){var T=W[U],X,S;if(T){for(S=T.length-1;S>=0;--S){X=T[S].evt;if(X.host===V||X.el===V){T[S].detach();}}}};if(J){L=N[J];K=E[1];P=(O)?c.Node.getDOMNode(this):this;if(L){if(K){C(L,K,P);}else{for(F in L){if(L.hasOwnProperty(F)){C(L,F,P);}}}return this;}}else{if(l(K)&&K.detach){K.detach();return this;}else{if(O&&((!R)||(R in H.DOM_EVENTS))){I=j(arguments,0,true);I[2]=H.getDOMNode(this);c.detach.apply(c,I);return this;}}}G=c.Env.evt.plugins[R];if(c.instanceOf(this,YUI)){I=j(arguments,0,true);if(G&&G.detach){G.detach.apply(c,I);return this;}else{if(!K||(!G&&H&&(K in H.DOM_EVENTS))){I[0]=K;c.Event.detach.apply(c.Event,I);return this;}}}D=Q[E[1]];if(D){D.detach(M,B);}return this;},unsubscribe:function(){return this.detach.apply(this,arguments);},detachAll:function(B){return this.detach(B);},unsubscribeAll:function(){return this.detachAll.apply(this,arguments);},publish:function(E,F){var H=this._yuievt,G=H.config.prefix,D=H.events,C=H.defaults,B;E=(G)?r(E,G):E;if(!D[E]){if(l(E)){B={};c.each(E,function(J,I){B[I]=this.publish(I,J||F);},this);return B;}F&&(C=c.merge(C,F));D[E]=new c.CustomEvent(E,C);}else{if(F){D[E].applyConfig(F,true);}}return D[E];},_monitor:function(E,B,F){var C,D=this.getEvent(B);if((this._yuievt.config.monitored&&(!D||D.monitored))||(D&&D.monitored)){C=B+"_"+E;F.monitored=E;this.fire.call(this,C,F);}},fire:function(E){var I=o(E),D=(I)?E:(E&&E.type),H,C,G=this._yuievt.config.prefix,F,B=(I)?j(arguments,1,true):arguments;D=(G)?r(D,G):D;this._monitor("fire",D,{args:B});H=this.getEvent(D,true);F=this.getSibling(D,H);if(F&&!H){H=this.publish(D);}if(!H){if(this._yuievt.hasTargets){return this.bubble({type:D},B,this);}C=true;}else{H.sibling=F;C=H.fire.apply(H,B);}return(this._yuievt.chain)?this:C;},getSibling:function(B,D){var C;if(B.indexOf(A)>-1){B=v(B);C=this.getEvent(B,true);if(C){C.applyConfig(D);C.bubbles=false;C.broadcast=0;}}return C;},getEvent:function(C,B){var D;if(!B){D=this._yuievt.config.prefix;C=(D)?r(C,D):C;}return this._yuievt.events[C]||null;},after:function(D,C){var B=j(arguments,0,true);switch(i.type(D)){case"function":return c.Do.after.apply(c.Do,arguments);case"array":case"object":B[0]._after=true;break;default:B[0]=h+D;}return this.on.apply(this,B);},before:function(){return this.on.apply(this,arguments);}};c.EventTarget=u;c.mix(c,u.prototype);u.call(c,{bubbles:false});YUI.Env.globalEvents=YUI.Env.globalEvents||new u();c.Global=YUI.Env.globalEvents;},"@VERSION@",{requires:["oop"]});